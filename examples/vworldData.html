<!DOCTYPE html>

<html>
    <head>
        <base href="../">
        <title>VWworld 데이터 시각화 예제</title>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="./css/egovframework/mbl/cmm/jquery.mobile-1.3.2.css">   <!-- jQuery Mobile -->
        <link rel="stylesheet" href="./css/egovframework/mbl/cmm/EgovMobile-1.3.2.css">      <!-- eGov Mobile -->
        <link type="text/css" rel="stylesheet" href="./css/ol3/ol.css">                      <!-- OpenLayers 3 -->
        <link rel="stylesheet" href="css/syntaxhighlighter/shCore.css">
        <link rel="stylesheet" href="css/syntaxhighlighter/shCoreDefault.css">

        <script type="text/javascript" src="./js/egovframework/mbl/cmm/jquery-1.9.1.min.js"></script>      <!-- jQuery -->
        <script type="text/javascript" src="./js/egovframework/mbl/cmm/jquery.mobile-1.3.2.min.js"></script> <!-- jQuery Mobile -->
        <script type="text/javascript" src="./js/egovframework/mbl/cmm/EgovMobile-1.3.2.js"></script>      <!-- eGov Mobile -->

        <!-- Proj, OpenLayers3, D3 -->
        <script type="text/javascript" src="./js/proj4js/2.2.2/proj4.js"></script>                         <!-- Proj4js -->
        <script type="text/javascript" src="./js/ol3/ol.js"></script>                                      <!-- OpenLayers 3 -->
        <script type="text/javascript" src="./js/d3/d3.js"></script>                                       <!-- D3.js -->
        <script type="text/javascript" src="./js/OpenGDSMobileLib/openGDSMobileClient1.2.min.js"></script> <!-- OpenGDS Mobile -->

        <script type="text/javascript" src="./js/syntaxhighlighter/shCore.js"></script>
        <script type="text/javascript" src="./js/syntaxhighlighter/shBrushXml.js"></script>
        <script type="text/javascript" src="./js/syntaxhighlighter/shBrushJScript.js"></script>
        <script type="text/javascript" src="./js/syntaxhighlighter/shBrushCss.js"></script>
        <style>
            html, body{
                height:100%;
            }
            .OGDSPosTopCenter{
            	position : absolute;
            	z-index : 999;
                width : 200px;
            	top : 25px;
            	left : 45%;
            	right : 45%;
            }
        </style>

        <script>
            SyntaxHighlighter.all();
            var obj = null;
            function vworldWMSUI() {
                    $('#vworldSelect').empty();
                    var ui = new OGDSM.eGovFrameUI();
                    var externalServer = new OGDSM.externalConnection('vworldWMS');
                    var wmsListIds = ui.vworldWMSList('vworldSelect');
                    var processBtn = ui.autoButton('vworldSelect', 'vworldProcess', '시각화', '#', {
                        theme : 'b'
                    });
                    processBtn.click(function () {
                        var i, data = [];
                        for (i = 0; i < wmsListIds.length; i++) {
                            var tmpData = $('#' + wmsListIds[i] + ' option:selected').val();
                            if (tmpData !== '') {
                                data.push(tmpData);
                            }
                        }
                        var wmsData = externalServer.vworldWMSLoad(
                            "9E21E5EE-67D4-36B9-85BB-E153321EEE65", "http://localhost", data);
                        obj.addMap(wmsData);
                        $('#vworldList').popup('close');
                    });
            }
            $(function(){
                obj = new OGDSM.visualization('map');
                obj.olMapView([127.010031, 37.582200], 'OSM', 'EPSG:900913');
            });
        </script>
    </head>

    <body>
        <div data-role="page">
            <div data-role="header" data-theme="b">
                OpenGDS Mobile Client Example
            </div>
            <div data-role="content" style="padding:0; margin:0;">
                <div id="map" style="width:100%; height:400px;"></div>
	            <a href="#vworldList" data-role="button" data-rel="popup" data-mini="true" data-inline="true" class="OGDSPosTopCenter" data-position-to="window" onclick="vworldWMSUI()">브이월드 WMS 데이터</a>
                <h3 style="margin-left:10px;">VWworld WMS 데이터 시각화</h3>
                <p style="font-size:12px; margin-left:25px;">
                 국가 공간정보 오픈플랫폼인 VWorld에서 API로 제공되고 있는 WMS 데이터를 시각화할 수 있는<br>
                 사용자 인터페이스 및 데이터 로드를 제공 ※ API 키 필요
                </p>
                <p style="margin-left:25px;">Code</p>
                <pre class="brush:html;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8" /&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;
        &lt;link rel="stylesheet" href="css/egovframework/mbl/cmm/jquery.mobile-1.3.2.css"&gt;   <!-- jQuery Mobile -->
        &lt;link rel="stylesheet" href="css/egovframework/mbl/cmm/EgovMobile-1.3.2.css"&gt;      <!-- eGov Mobile -->
        &lt;link type="text/css" rel="stylesheet" href="css/ol3/ol.css"&gt;                      <!-- OpenLayers 3 -->

        &lt;script type="text/javascript" src="js/egovframework/mbl/cmm/jquery-1.9.1.min.js"&gt;&lt;/script&gt;      <!-- jQuery -->
        &lt;script type="text/javascript" src="js/egovframework/mbl/cmm/jquery.mobile-1.3.2.min.js"&gt;&lt;/script&gt; <!-- jQuery Mobile -->
        &lt;script type="text/javascript" src="js/egovframework/mbl/cmm/EgovMobile-1.3.2.js"&gt;&lt;/script&gt;      <!-- eGov Mobile -->

        <!-- Proj, OpenLayers3, D3 -->
        &lt;script type="text/javascript" src="js/proj4js/2.2.2/proj4.js"&gt;&lt;/script&gt;                         <!-- Proj4js -->
        &lt;script type="text/javascript" src="js/ol3/ol.js"&gt;&lt;/script&gt;                                      <!-- OpenLayers 3 -->
        &lt;script type="text/javascript" src="js/d3/d3.js"&gt;&lt;/script&gt;                                       <!-- D3.js -->
        &lt;script type="text/javascript" src="js/OpenGDSMobileLib/openGDSMobileClient1.2.min.js"&gt;&lt;/script&gt; <!-- OpenGDS Mobile -->
        &lt;style&gt;
            ... (CSS 내용)
        &lt;/style&gt;
        &lt;script&gt;
            ... (script 내용)
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="map" style="width:100%; height:400px;"&gt;
        &lt;a href="#vworldList" data-role="button" data-rel="popup" data-mini="true" data-inline="true" class="OGDSPosTopCenter" data-position-to="window" onclick="vworldWMSUI()"&gt;브이월드 WMS 데이터&lt;/a&gt;
        &lt;div data-role="popup" id="vworldList" data-overlay-theme="b" style="padding: 15px"&gt;
                &lt;p>서로 다른 레이어 최대 5개 선택 가능&lt;/p&gt;
                &lt;div id="vworldSelect"> &lt;/div&gt;
        &lt;/div&lt;
    &lt;/body&gt;
&lt;/html&gt;
                </pre>
                <p style="margin-left:25px;">CSS 내용</p>
                <pre class="brush:css;">
                .OGDSPosTopCenter{
                    position : absolute;
                    z-index : 999;
                    width : 200px;
                    top : 25px;
                    left : 45%;
                    right : 45%;
                }
                </pre>
                <p style="margin-left:25px;">script 내용</p>
                <pre class="brush:js;">
            var obj = null;

            function vworldWMSUI() {
                $('#vworldSelect').empty();
                var ui = new OGDSM.eGovFrameUI();
                var externalServer = new OGDSM.externalConnection('vworldWMS');
                var wmsListIds = ui.vworldWMSList('vworldSelect');
                var processBtn = ui.autoButton('vworldSelect', 'vworldProcess', '시각화', '#', {
                    theme : 'b'
                });
                processBtn.click(function () {
                    var i, data = [];
                    for (i = 0; i < wmsListIds.length; i++) {
                        var tmpData = $('#' + wmsListIds[i] + ' option:selected').val();
                        if (tmpData !== '') {
                            data.push(tmpData);
                        }
                    }
                    var wmsData = externalServer.vworldWMSLoad("9E21E5EE-67D4-36B9-85BB-E153321EEE65", "http://localhost", data);
                    obj.addMap(wmsData);
                    $('#vworldList').popup('close');
                });
            }
            $(function(){
                obj = new OGDSM.visualization('map');
                obj.olMapView([127.010031, 37.582200], 'OSM', 'EPSG:900913');
            });

                </pre>

            </div>
            <!-- Vworld WMS -->
            <div data-role="popup" id="vworldList" data-overlay-theme="b" style="padding: 15px">
                <p>서로 다른 레이어 최대 5개 선택 가능</p>
                <div id="vworldSelect"> </div>
            </div>

        </div>
    </body>
</html>
