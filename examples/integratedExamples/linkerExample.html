<!DOCTYPE html>
<html>
<head>
  <title>Mobile Web Application for Geospatial Data Using OpenGDS Mobile</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


  <!-- Google Closure lib for test -->
  <script type="text/javascript" src="../../closure-library/closure/goog/base.js"></script>
  <link type="text/css" rel="stylesheet" href="../../closure-library/closure/goog/css/button.css">
  <link type="text/css" rel="stylesheet" href="../../closure-library/closure/goog/css/hsvpalette.css">

  <!-- dependency library CSS-->
  <link type="text/css" rel="stylesheet" href="../../src/libs/css/ol3/ol.css">                      <!-- OpenLayers 3 -->
  <link type="text/css" rel="stylesheet" href="../../src/libs/css/bootstrap/bootstrap.min.css">
  <link type="text/css" rel="stylesheet" href="./css/bootstrap-select/bootstrap-select.min.css">


  <!-- dependency library JS-->
  <!-- egovFramework  KOREA-->
  <script type="text/javascript" src="../../src/libs/js/egovframework/mbl/cmm/jquery-1.11.2.js"></script>      <!-- jQuery -->
  <script type="text/javascript" src="../../src/libs/js/bootstrap/bootstrap.min.js"></script>
  <script type="text/javascript" src="./js/bootstrap-select/bootstrap-select.min.js"></script>

  <!-- Proj, OpenLayers3, D3 -->
  <script type="text/javascript" src="../../src/libs/js/proj4js/2.2.2/proj4.js"></script>                         <!-- Proj4js -->
  <script type="text/javascript" src="../../src/libs/js/ol3/ol-3.14.2.js"></script>                                      <!-- OpenLayers 3 -->
  <script type="text/javascript" src="../../src/libs/js/d3/d3.v4/d3.min.js"></script>                                       <!-- D3.js -->

  <link type="text/css" rel="stylesheet"  href="../../src/css/MapsManager.css" />

  <script type="text/javascript" src="../../src/js/OpenGDSMobile.js"></script>
  <script type="text/javascript" src="../../src/js/Util.js"></script>
  <script type="text/javascript" src="../../src/js/MapsVis.js"></script>
  <script type="text/javascript" src="../../src/js/MapsManager.js"></script>
  <script type="text/javascript" src="../../src/js/Sortable.js"></script>
  <script type="text/javascript" src="../../src/js/ChartVis.js"></script>
  <script type="text/javascript" src="../../src/js/VWorldVis.js"></script>

  <!-- Global CSS Setting-->
  <style>
    html, body{
      width: 100%;      height: 100%;      padding : 0;      margin : 0;      font-size:10px;
      overflow:hidden;
    }
    header{
      height:25px;      background:#3862C4;      color : #FFFFFF;      font-size:1.6rem;      font-weight: bold;
    }
    aside{
      float:left;      width:54px;      background: #aac8e8;
    }
    section{
      float:right;      background: #EEEEEE;
    }
    footer{
      clear:both;      height:14px;      background: #1c0064;      font-size:0.8em;      color : #FFFFFF;
      font-weight: bold;
    }
    nav {
      box-shadow:inset -2px 0px 3px 0px #555;
    }
    nav ul{
      height:100%;
    }
    nav li{
      height: 16.6%;
      margin-top:10%;
      margin-bottom:10%;
    }
  </style>
  <script>
    var baseAddr = 'http://113.198.80.9';
    var publicDataContextName = '/publicManager';
    var geoServerContextName = '/geoserver';
    var asContextName = '/ApplicationServer';
    var geoServerWS = "OpenGDSMobile";
    var map, mapManager;
    var contentHeight = '';
    $(function(){
      function resizeWindow(){
        var headerHeight = parseInt((getComputedStyle(document.getElementsByTagName("header")[0]).height).replace(/[^-\d\.]/g,'')),
            footerHeight = parseInt((getComputedStyle(document.getElementsByTagName("footer")[0]).height).replace(/[^-\d\.]/g,'')),
            asideWidth = parseInt((getComputedStyle(document.getElementsByTagName("aside")[0]).width).replace(/[^-\d\.]/g,''));
        var frameWidth = window.innerWidth, frameHeight = window.innerHeight;
        var sectionTag = document.getElementsByTagName("section");
        var asideTag = document.getElementsByTagName("aside");
        var ulTag = document.getElementById("iconMenu");
        var menuClass = document.getElementsByClassName("menu-detail");
        sectionTag[0].style.width = (frameWidth - asideWidth) + "px";
        contentHeight = ulTag.style.height = asideTag[0].style.height = sectionTag[0].style.height = (frameHeight - (headerHeight + footerHeight)) + "px";
        for (var i = 0; i<menuClass.length; i++){
          menuClass[i].style.height = (frameHeight - (headerHeight + footerHeight)) + "px";
        }
        var contents = ['content'];
        for (var i =0; i<contents.length; i++){
          var div = document.getElementById(contents[i]);
          div.style.width = (300 - 2) + 'px';
          div.style.height = (frameHeight - (headerHeight + footerHeight)) + "px";
        }
      }
      window.addEventListener('resize', function(event){
        resizeWindow();
      });
      resizeWindow();

      map = new openGDSMobile.MapVis('map');
      var controls = map.getMapObj().getControls();
      controls.clear();

      mapManager = new openGDSMobile.MapManager('mapList', map, {
        height : '50%'
      });
    });
  </script>

  <link type="text/css" rel="stylesheet" href="css/font-face-style.css">
  <link type="text/css" rel="stylesheet" href="css/linker-style.css">

  <script type="text/javascript" src="js/linker-main.js"></script>

  <body>
    <header>
      <div style="width:100%; padding-left: 40px;">Link Service about Geo-Spatial & Open Data by Hansung University(Lab of Geo-Spatial Information)</div>
      <div style="width:100%; height:2px; background:#FFFFFF;"></div>
    </header>
    <section>
      <div id="map" style="width:100%; height:100%;">
        <div id="selectMap" style="position:absolute; right:1px; top:26px;">
          <select class="selectpicker" data-style="btn-success">
            <optgroup label="World">
              <option value="OSM">Open Street Map</option>
              <option value="Stamen-water">Stamen - WaterColor</option>
              <option value="Stamen-terrain">Stamen - Terrain</option>
              <option value="Stamen-toner">Stamen - Toner</option>
            </optgroup>
            <optgroup label="Korea">
              <option value="VWorld">VWorld</option>
              <option value="korSeoulMap">Seoul Map</option>
            </optgroup>
          </select>
        </div>
      </div>
    </section>

    <aside>
      <nav>
        <ul id="iconMenu">
          <li>
            <a href="javascript:void(0)" class="link-none-line menu-event" id="vectorMapVis">
              <span class="icon-map btn-shadow"></span>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)" class="link-none-line menu-event" id="openDataVis">
              <span class="icon-library btn-shadow"></span>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)" class="link-none-line menu-event" id="fusionVis">
              <span class="icon-fusion btn-shadow"></span>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)" class="link-none-line menu-event" id="layerManager">
              <span class="icon-stack btn-shadow"></span>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)" class="link-none-line menu-event" id="zoomIn">
              <span class="icon-zoom-in btn-shadow"></span>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)" class="link-none-line menu-event" id="zoomOut">
              <span class="icon-zoom-out btn-shadow"></span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>
    <div id="container" class="menu-detail menu-hide">
      <div id="content" class="list-group scroll-style"></div>
    </div>
    <div id="mapList" class="menu-detail menu-hide">
    </div>
    <footer>
      This research was supported by National Land Space Information Research Program by Ministry of Land, Infrastructure and Transport of Korean government(No. 14NSIP-B080144-01).
    </footer>
  </body>
</html>