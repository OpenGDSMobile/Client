/* 2015-06-08 */ var OGDSM=OGDSM||{};OGDSM=function(){"use strict";return OGDSM.prototype={constructor:OGDSM,version:"1.2"},OGDSM}(window,jQuery),OGDSM.namesapce=function(a){"use strict";var b,c=a.split("."),d=OGDSM;for("OGDSM"===d[0]&&(c=c.slice(1)),b=0;b<c.length;b+=1)"undefined"==typeof d[c[b]]&&(d[c[b]]={}),d=d[c[b]];return d},OGDSM.jsonToArray=function(a,b,c){"use strict";var d=[],e=a.row;return d[0]=[],d[1]=[],$.each(e,function(a){d[0].push(e[a][b]),d[1].push(e[a][c])}),d},function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,b){this.el=a,this.options=b=b||{};var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1};for(var e in d)!(e in b)&&(b[e]=d[e]);var g=b.group;g&&"object"==typeof g||(g=b.group={name:g}),["pull","put"].forEach(function(a){a in g||(g[a]=!0)}),M.forEach(function(d){b[d]=c(this,b[d]||N),f(a,d.substr(2).toLowerCase(),b[d])},this),b.groups=" "+g.name+(g.put.join?" "+g.put.join(" "):"")+" ",a[F]=b;for(var h in this)"_"===h.charAt(0)&&(this[h]=c(this,this[h]));f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),f(a,"dragover",this),f(a,"dragenter",this),Q.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a){s&&s.state!==a&&(i(s,"display",a?"none":""),!a&&s.state&&t.insertBefore(s,q),s.state=a)}function c(a,b){var c=P.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(P.call(arguments)))}}function d(a,b,c){if(a){c=c||H,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName.toUpperCase()==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function e(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function f(a,b,c){a.addEventListener(b,c,!1)}function g(a,b,c){a.removeEventListener(b,c,!1)}function h(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function i(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return H.defaultView&&H.defaultView.getComputedStyle?c=H.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function j(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function k(a){a.draggable=!1}function l(){K=!1}function m(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5&&c}function n(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function o(a){for(var b=0;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&b++;return b}function p(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E={},F="Sortable"+(new Date).getTime(),G=window,H=G.document,I=G.parseInt,J=!!("draggable"in H.createElement("div")),K=!1,L=function(a,b,c,d,e,f){var g=H.createEvent("Event");g.initEvent(b,!0,!0),g.item=c||a,g.from=d||a,g.clone=s,g.oldIndex=e,g.newIndex=f,a.dispatchEvent(g)},M="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),N=function(){},O=Math.abs,P=[].slice,Q=[],R=p(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h=b.scrollSensitivity,i=b.scrollSpeed,j=a.clientX,k=a.clientY,l=window.innerWidth,m=window.innerHeight;if(w!==c&&(v=b.scroll,w=c,v===!0)){v=c;do if(v.offsetWidth<v.scrollWidth||v.offsetHeight<v.scrollHeight)break;while(v=v.parentNode)}v&&(d=v,e=v.getBoundingClientRect(),f=(O(e.right-j)<=h)-(O(e.left-j)<=h),g=(O(e.bottom-k)<=h)-(O(e.top-k)<=h)),f||g||(f=(h>=l-j)-(h>=j),g=(h>=m-k)-(h>=k),(f||g)&&(d=G)),(E.vx!==f||E.vy!==g||E.el!==d)&&(E.el=d,E.vx=f,E.vy=g,clearInterval(E.pid),d&&(E.pid=setInterval(function(){d===G?G.scrollTo(G.scrollX+f*i,G.scrollY+g*i):(g&&(d.scrollTop+=g*i),f&&(d.scrollLeft+=f*i))},24)))}},30);return a.prototype={constructor:a,_dragStarted:function(){t&&q&&(h(q,this.options.ghostClass,!0),a.active=this,L(t,"start",q,t,z))},_onTapStart:function(a){var b=a.type,c=a.touches&&a.touches[0],e=(c||a).target,g=e,h=this.options,i=this.el,l=h.filter;if(!("mousedown"===b&&0!==a.button||h.disabled)&&(e=d(e,h.draggable,i))){if(z=o(e),"function"==typeof l){if(l.call(this,a,e,this))return L(g,"filter",e,i,z),void a.preventDefault()}else if(l&&(l=l.split(",").some(function(a){return a=d(g,a.trim(),i),a?(L(a,"filter",e,i,z),!0):void 0})))return void a.preventDefault();if((!h.handle||d(g,h.handle,i))&&e&&!q&&e.parentNode===i){C=a,t=this.el,q=e,u=q.nextSibling,B=this.options.group,q.draggable=!0,h.ignore.split(",").forEach(function(a){j(e,a.trim(),k)}),c&&(C={target:e,clientX:c.clientX,clientY:c.clientY},this._onDragStart(C,"touch"),a.preventDefault()),f(H,"mouseup",this._onDrop),f(H,"touchend",this._onDrop),f(H,"touchcancel",this._onDrop),f(q,"dragend",this),f(t,"dragstart",this._onDragStart),J||this._onDragStart(C,!0);try{H.selection?H.selection.empty():window.getSelection().removeAllRanges()}catch(m){}}}},_emulateDragOver:function(){if(D){i(r,"display","none");var a=H.elementFromPoint(D.clientX,D.clientY),b=a,c=" "+this.options.group.name,d=Q.length;if(b)do{if(b[F]&&b[F].groups.indexOf(c)>-1){for(;d--;)Q[d]({clientX:D.clientX,clientY:D.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);i(r,"display","")}},_onTouchMove:function(a){if(C){var b=a.touches?a.touches[0]:a,c=b.clientX-C.clientX,d=b.clientY-C.clientY,e=a.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";D=b,i(r,"webkitTransform",e),i(r,"mozTransform",e),i(r,"msTransform",e),i(r,"transform",e),a.preventDefault()}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;if(this._offUpEvents(),"clone"==B.pull&&(s=q.cloneNode(!0),i(s,"display","none"),t.insertBefore(s,q)),b){var e,g=q.getBoundingClientRect(),h=i(q);r=q.cloneNode(!0),i(r,"top",g.top-I(h.marginTop,10)),i(r,"left",g.left-I(h.marginLeft,10)),i(r,"width",g.width),i(r,"height",g.height),i(r,"opacity","0.8"),i(r,"position","fixed"),i(r,"zIndex","100000"),t.appendChild(r),e=r.getBoundingClientRect(),i(r,"width",2*g.width-e.width),i(r,"height",2*g.height-e.height),"touch"===b?(f(H,"touchmove",this._onTouchMove),f(H,"touchend",this._onDrop),f(H,"touchcancel",this._onDrop)):(f(H,"mousemove",this._onTouchMove),f(H,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,q)),f(H,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(a){var c,e,f,g=this.el,h=this.options,j=h.group,k=j.put,n=B===j,o=h.sort;if(q&&(void 0!==a.preventDefault&&(a.preventDefault(),!h.dragoverBubble&&a.stopPropagation()),B&&!h.disabled&&(n?o||(f=!t.contains(q)):B.pull&&k&&(B.name===j.name||k.indexOf&&~k.indexOf(B.name)))&&(void 0===a.rootEl||a.rootEl===this.el))){if(R(a,h,this.el),K)return;if(c=d(a.target,h.draggable,g),e=q.getBoundingClientRect(),f)return b(!0),void(s||u?t.insertBefore(q,s||u):o||t.appendChild(q));if(0===g.children.length||g.children[0]===r||g===a.target&&(c=m(g,a))){if(c){if(c.animated)return;v=c.getBoundingClientRect()}b(n),g.appendChild(q),this._animate(e,q),c&&this._animate(v,c)}else if(c&&!c.animated&&c!==q&&void 0!==c.parentNode[F]){x!==c&&(x=c,y=i(c));var p,v=c.getBoundingClientRect(),w=v.right-v.left,z=v.bottom-v.top,A=/left|right|inline/.test(y.cssFloat+y.display),C=c.offsetWidth>q.offsetWidth,D=c.offsetHeight>q.offsetHeight,E=(A?(a.clientX-v.left)/w:(a.clientY-v.top)/z)>.5,G=c.nextElementSibling;K=!0,setTimeout(l,30),b(n),p=A?c.previousElementSibling===q&&!C||E&&C:G!==q&&!D||E&&D,p&&!G?g.appendChild(q):c.parentNode.insertBefore(q,p?G:c),this._animate(e,q),this._animate(v,c)}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();i(b,"transition","none"),i(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,i(b,"transition","all "+c+"ms"),i(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){i(b,"transition",""),i(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){g(H,"mouseup",this._onDrop),g(H,"touchmove",this._onTouchMove),g(H,"touchend",this._onDrop),g(H,"touchcancel",this._onDrop)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(E.pid),g(H,"drop",this),g(H,"mousemove",this._onTouchMove),g(c,"dragstart",this._onDragStart),this._offUpEvents(),b&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation(),r&&r.parentNode.removeChild(r),q&&(g(q,"dragend",this),k(q),h(q,this.options.ghostClass,!1),t!==q.parentNode?(A=o(q),L(q.parentNode,"sort",q,t,z,A),L(t,"sort",q,t,z,A),L(q,"add",q,t,z,A),L(t,"remove",q,t,z,A)):(s&&s.parentNode.removeChild(s),q.nextSibling!==u&&(A=o(q),L(t,"update",q,t,z,A),L(t,"sort",q,t,z,A))),a.active&&L(t,"end",q,t,z,A)),t=q=r=u=s=v=w=C=D=x=y=B=a.active=null,this.save())},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?(this._onDragOver(a),e(a)):("drop"===b||"dragend"===b)&&this._onDrop(a)},toArray:function(){for(var a,b=[],c=this.el.children,e=0,f=c.length;f>e;e++)a=c[e],d(a,this.options.draggable,this.el)&&b.push(a.getAttribute("data-id")||n(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){var f=c.children[e];d(f,this.options.draggable,c)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return d(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:void(c[a]=b)},destroy:function(){var a=this.el,b=this.options;M.forEach(function(c){g(a,c.substr(2).toLowerCase(),b[c])}),g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"dragover",this),g(a,"dragenter",this),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),Q.splice(Q.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},a.utils={on:f,off:g,css:i,find:j,bind:c,is:function(a,b){return!!d(a,b,a)},throttle:p,closest:d,toggleClass:h,dispatchEvent:L,index:o},a.version="1.1.1",a.create=function(b,c){return new a(b,c)},a}),OGDSM.namesapce("visualization"),function(a){"use strict";return a.visualization=function(b,c){c="undefined"!=typeof c?c:{};var d;this.updateLayoutSetting(b),this.mapDiv=b,this.geoLocation=null,a.visualization=this;var e={layerListDiv:null,attrTableDiv:null,attrAddr:""};for(d in e)e.hasOwnProperty(d)&&c.hasOwnProperty(d)&&(e[d]=c[d]);$(window).on("resize",function(){a.visualization.updateLayoutSetting()}),null!==e.layerListDiv&&(this.layerListObj=new a.mapLayerList(this,e.layerListDiv)),null!==e.attrTableDiv&&(this.attrTableObj=new a.attributeTable(e.attrTableDiv,e.attrAddr))},a.visualization.prototype={constructor:a.visualization,getMap:function(){return this.mapObj},layerCheck:function(a){var b,c=this.getMap().getLayers().getArray();for(b=0;b<c.length;b+=1)if(c[b].get("title")===a)return c[b];return!1},indexOf:function(a,b){var c,d=a.getLength();for(c=0;d>c;c++)if(b===a.item(c))return c;return-1}},a.visualization}(OGDSM),OGDSM.visualization.prototype.olMapView=function(a,b,c){"use strict";a="undefined"!=typeof a?a:[37.5822,127.010031],b="undefined"!=typeof b?b:"OSM",c="undefined"!=typeof c?c:"EPSG:3857";var d=null,e=null,f=new ol.proj.Projection({code:"EPSG:5181",extent:[-219825.99,-535028.96,819486.07,777525.22],units:"m"}),g=new ol.proj.Projection({code:"EPSG:5179",extent:[531371.84,967246.47,1576674.68,2274021.31],units:"m"});ol.proj.addProjection(f),ol.proj.addProjection(g);var h=new ol.View({projection:ol.proj.get(c),center:ol.proj.transform(a,"EPSG:4326",c),zoom:12,maxZoom:18,minZoom:6});return d=new ol.Map({target:this.mapDiv,layers:[new ol.layer.Tile({title:"basemap",source:e})],view:h,controls:[]}),this.mapObj=d,this.baseProj=c,this.changeBaseMap(b),this.mapObj},OGDSM.visualization.prototype.changeBaseMap=function(a){"use strict";var b=null,c=null,d=null,e=this.mapObj,f=e.getLayers(),g=e.getView().getCenter(),h=e.getView().getZoom(),i=e.getView().getProjection();if(f.forEach(function(a){var b=a.get("title");"basemap"===b&&(d=a)}),"OSM"===a)b=new ol.source.OSM,c=new ol.View({projection:i,center:g,zoom:h});else if("VWorld"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/Base/201310/{z}/{x}/{y}.png"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else if("VWorld_s"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/Satellite/201301/{z}/{x}/{y}.jpeg"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else if("VWorld_g"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/gray/201411/{z}/{x}/{y}.png"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else if("VWorld_m"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/midnight/201411/{z}/{x}/{y}.png"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else{if(""!==a)return console.error('Not Map Style "OSM" | "VWorld" | "VWorld_m" | "VWorld_h"'),null;b=null,c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6})}null!==d&&(e.setView(c),d.setSource(b))},OGDSM.visualization.prototype.trackingGeoLocation=function(a){"use strict";var b=this.geoLocation,c=this.mapObj;return"undefined"==typeof this.mapObj?(console.error("Not Create Map!!"),null):(null===b&&(b=new ol.Geolocation({projection:c.getView().getProjection(),tracking:!0})),void(a===!0&&b.once("change:position",function(){c.getView().setCenter(b.getPosition())})))},OGDSM.visualization.prototype.updateLayoutSetting=function(a){"use strict";a="undefined"!=typeof a?a:this.mapDiv,"undefined"!=typeof this.mapObj&&this.mapObj.updateSize()},OGDSM.visualization.prototype.addMap=function(a,b){"use strict";var c=this.layerCheck(a.get("title"));if(c===!1){if(this.getMap().addLayer(a),"undefined"!=typeof this.layerListObj){var d;"undefined"!=typeof a.getStyle?"polygon"===b?d=a.getStyle()[0].getFill().getColor():"point"===b&&(d=a.getStyle()[0].getImage().getFill().getColor()):d="rgb(0, 0, 0)",this.layerListObj.listManager(a,a.get("title"),d,b)}"undefined"!=typeof this.attrTableObj&&this.attrTableObj.addAttribute(a.get("title"))}else console.log("Layer is existence")},OGDSM.visualization.prototype.imageLayer=function(a,b,c,d){"use strict";var e=null,f=b;e=new ol.layer.Image({opacity:1,title:f,source:new ol.source.ImageStatic({url:a+"?"+Math.random(),imageSize:c,projection:new ol.proj.Projection({code:"EPSG:3857"}),imageExtent:d})}),this.getMap().addLayer(e)},OGDSM.visualization.prototype.removeMap=function(a){"use strict";var b=this.layerCheck(a);b!==!1&&(this.getMap().removeLayer(b),"undefined"!=typeof this.layerListObj&&this.layerListObj.removelist(a))},OGDSM.visualization.prototype.setVisible=function(a,b){"use strict";var c=this.layerCheck(a);c!==!1&&c.setVisible(b)},OGDSM.visualization.prototype.changeWFSStyle=function(a,b,c){"use strict";var d,e=this.layerCheck(a),f={};c="undefined"!=typeof c?c:{};var g={type:"polygon",opt:.5,attr:null,range:null,xyData:null};for(d in g)g.hasOwnProperty(d)&&c.hasOwnProperty(d)&&(g[d]=c[d]);return e===!1?(console.error("Not Map Layer"),-1):(e.setStyle(function(a,c){var d,e,h="#FFFFFF",i=5e3>c?a.get(g.attr):"";if(!f[i]){if(Array.isArray(b)){for(d=0;d<g.xyData[1].length;d+=1)if(i===g.xyData[1][d])for(e=0;e<g.range.length;e+=1)if(g.xyData[0][d]<=g.range[e]){h=b[e];break}}else h=b;"polygon"===g.type?f[i]=[new ol.style.Style({fill:new ol.style.Fill({color:h}),stroke:new ol.style.Stroke({color:"#00000",width:1}),text:new ol.style.Text({font:"9px Calibri,sans-serif",text:i,fill:new ol.style.Fill({color:"#000000"})})})]:"point"===g.type&&(f[i]=[new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:h}),stroke:new ol.style.Stroke({color:"#000000",width:1})})})])}return f[i]}),void e.setOpacity(g.opt))},OGDSM.visualization.prototype.barChart=function(a,b,c,d){"use strict";c="undefined"!=typeof c?c:[],d="undefined"!=typeof d?d:["#000000"];var e=18,f=0,g=$("#"+a),h=d3.max(b[0]),i=null,j=null,k=null;g.empty(),i=d3.select("#"+a).append("svg").attr("id","barchart").attr("width",g.width()).attr("height",e*b[0].length),j=d3.scale.linear().domain([0,h]).range([0,g.width()-50]),i.selectAll("rect").data(b[0]).enter().append("rect").attr("x",0).attr("y",function(a,b){return b*e}).attr("width",function(a){return"-"===a||"0"===a?j(20):j(a)-f}).attr("height",e-2).attr("fill",function(a,e){if("-"===a||"0"===a)return"#AAAAAA";if(0!==c.length)for(k=0;k<c.length;k+=1)if(b[0][e]<=c[k])return d[k];return d[d.length]}),i.selectAll("g").data(b[1]).enter().append("text").attr("x",0).attr("y",function(a,b){return b*e+e-5}).attr("font-weight","bold").attr("font-size","0.8em").text(function(a){return a}),i.selectAll("g").data(b[0]).enter().append("text").attr("x",function(a){return"-"===a||"0"===a?j(10):j(a)-f}).attr("y",function(a,b){return b*e+e-5}).attr("dy",".15em").attr("fill","black").attr("font-size","0.8em").attr("font-weight","bold").text(function(a){return"-"===a||"0"===a?"점검중":a})},OGDSM.namesapce("externalConnection"),function(a){"use strict";return a.externalConnection=function(){},a.externalConnection.prototype={constructor:a.externalConnection},a.externalConnection}(OGDSM),OGDSM.externalConnection.prototype.geoServerWFSLoad=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{};var f,g,h=b+"/geoserver/wfs?service=WFS&version=1.1.0&request=GetFeature&typeNames="+c+":"+d+"&outputFormat=json&srsname="+a.baseProj,i={type:"polygon",color:"rgba(0, 0, 0, 0.0)",callback:function(){}};for(g in i)i.hasOwnProperty(g)&&e.hasOwnProperty(g)&&(i[g]=e[g]);"polygon"===i.type?f=[new ol.style.Style({fill:new ol.style.Fill({color:i.color}),stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 1.0)",width:1})})]:"point"===i.type&&(f=[new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:i.color}),stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 1.0)",width:1})})})]),$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),d=d.replace(/[ \{\}\[\]\/?.,;:|\)*~`!^\-+┼<>@\#$%&\'\"\\\(\=]/gi,""),$.ajax({type:"POST",url:h,crossDomain:!0,dataType:"json",success:function(b){var c=new ol.layer.Vector({title:d,source:new ol.source.GeoJSON({object:b}),style:f});a.addMap(c,i.type),$.mobile.loading("hide"),i.callback(c)},error:function(a){console.log(a)}})},OGDSM.externalConnection.prototype.geoServerWFS=function(a,b,c,d){d="undefined"!=typeof d?d:{};var e,f,g,h,i={type:"polygon",epsg:"epsg3857"};for(h in i)i.hasOwnProperty(h)&&d.hasOwnProperty(h)&&(i[h]=d[h]);return e=new ol.source.ServerVector({format:new ol.format.GeoJSON,loader:function(d){var e=a+"/geoserver/wfs?service=WFS&version=1.1.0&request=GetFeature&typeNames="+b+":"+c+"&outputFormat=text/javascript&format_options=callback:loadFeatures&srsname="+i.epsg+"&bbox="+d.join(",")+","+i.epsg;$.ajax({url:e,dataType:"jsonp"})},strategy:ol.loadingstrategy.createTile(new ol.tilegrid.XYZ({maxZoom:19})),projection:"EPSG:3857"}),"polygon"===i.type?f=[new ol.style.Style({fill:new ol.style.Fill({color:"#ff0000"}),stroke:new ol.style.Stroke({color:"#000000",width:1})})]:"point"===i.type&&(f=[new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#ff0000"}),stroke:new ol.style.Stroke({color:"#ff0000",width:1})})})]),loadFeatures=function(a){e.addFeatures(e.readFeatures(a))},g=new ol.layer.Vector({title:c,source:e,style:f})},OGDSM.externalConnection.prototype.vworldWMSLoad=function(a,b,c){"use strict";c=c.join(",");var d=new ol.layer.Tile({title:"VWorldWMS",source:new ol.source.TileWMS({url:"http://map.vworld.kr/js/wms.do",params:{apiKey:a,domain:b,LAYERS:c,STYLES:c,FORMAT:"image/png",CRS:"EPSG:900913",EXCEPTIONS:"text/xml",TRANSPARENT:!0}})});return d},OGDSM.externalConnection.prototype.seoulEnvironmentLoad=function(a,b,c,d,e,f){"use strict";var g,h='{"serviceName":"TimeAverageAirQuality","keyValue":"'+b+'","dateValue":"'+d+'", "envType":"'+c+'","timeValue":"'+e+'"} ';h=JSON.parse(h),console.log(h),$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),$.ajax({type:"POST",url:a,data:JSON.stringify(h),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(a){g=JSON.parse(a.data),$.mobile.loading("hide"),f(g)},error:function(a){console.log(a),$.mobile.loading("hide")}})},OGDSM.externalConnection.prototype.dataPortalEnvironmentLoad=function(a,b,c,d,e){"use strict";var f,g='{"serviceName":"ArpltnInforInqireSvc", "keyValue":"'+b+'","areaType":"'+encodeURIComponent(d)+'","envType":"'+c+'"}';g=JSON.parse(g),console.log(g),$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),$.ajax({type:"POST",url:a,data:JSON.stringify(g),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(a){f=JSON.parse(a.data),$.mobile.loading("hide"),e(f)},error:function(a){console.log(a),$.mobile.loading("hide")}})},OGDSM.externalConnection.prototype.getLayersGeoServer=function(a,b,c){"use strict";var d={wsName:b};$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),$.ajax({type:"POST",url:a,data:JSON.stringify(d),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(a){var b=a.data;$.mobile.loading("hide"),c(b)},error:function(a){console.log(a)}})},OGDSM.namesapce("eGovFrameUI"),function(a){"use strict";return a.eGovFrameUI=function(a){a="undefined"!=typeof a?a:null,this.dataTheme=null!==a?a:"c"},a.eGovFrameUI.prototype={constructor:a.eGovFrameUI},a.eGovFrameUI}(OGDSM),OGDSM.eGovFrameUI.prototype.autoButton=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{};var f=$("#"+a),g='<a data-role="button" id="'+b+'" href="'+d+'" ',h=null,i={theme:this.dataTheme,corners:!0,inline:!1,mini:!1};for(h in i)i.hasOwnProperty(h)&&e.hasOwnProperty(h)&&(i[h]=e[h]);return g+='data-theme="'+i.theme+'" data-corners="'+i.corners+'" data-inline="'+i.inline+'" data-mini="'+i.mini+'"',g+=">"+c+"</a>",f.append(g),f.trigger("create"),$("#"+b)},OGDSM.eGovFrameUI.prototype.autoCheckBox=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{};var f=$("#"+a),g="",h=0,i=null,j={checkName:b+"Name",theme:this.dataTheme,horizontal:!1};for(i in j)j.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(j[i]=e[i]);if(g="",Array.isArray(c)){for(g+='<fieldset data-role="controlgroup" ',g+=j.horizontal?'data-type="horizontal">':">",h=0;h<c.length;h+=1)g+='<input type="checkbox" name="'+j.checkName+'" id="'+b+h+'" value="'+d[h]+'" ',g+='data-theme="'+j.theme+'" class="custom"/>',g+='<label for="'+b+h+'">'+c[h]+"</label>";g+="</fieldset>"}else g+='<input type="checkbox" name="'+j.checkName+'" id="'+b+'" value="'+d[h]+'" ',g+='data-theme="'+j.theme+'" class="custom"/>',g+='<label for="'+b+'">'+c+"</label>";return f.append(g),f.trigger("create"),$("input[name="+j.checkName+"]:checkbox")},OGDSM.eGovFrameUI.prototype.autoRadioBox=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{};var f=$("#"+a),g='<fieldset data-role="controlgroup" style="margin:0px; align:center;"',h=(["",this.dataTheme],0),i=0,j={radioName:b+"Name",horizontal:!1,theme:this.dataTheme};for(i in j)j.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(j[i]=e[i]);for(g+=j.horizontal?'data-theme="'+j.theme+'" data-type="horizontal">':'data-theme="'+j.theme+'">',h=0;h<c.length;h+=1)g+='<input type="radio"name="'+j.radioName+'" id="'+b+h+'" value="'+d[h]+'" ',g+='data-theme="'+j.theme+'" class="custom" ',g+=0===h?'checked="checked" />':"/>",g+='<label for="'+b+h+'">'+c[h]+"</label>";return g+="</fieldset>",f.append(g),f.trigger("create"),$("input[name="+j.radioName+"]:radio")},OGDSM.eGovFrameUI.prototype.autoSelect=function(a,b,c,d,e,f){"use strict";f="undefined"!=typeof f?f:{};var g=$("#"+a),h=null,i=0,j=null,k={firstName:"",theme:this.dataTheme,corners:!0,inline:!1,selected:0};for(j in k)k.hasOwnProperty(j)&&f.hasOwnProperty(j)&&(k[j]=f[j]);for(h='<select name="'+c+'" id="'+b+'" data-theme="'+k.theme+'" data-corners="'+k.corners+'" data-inline="'+k.inline+'">',h+='<option value=""> '+k.firstName+"</option>",i=0;i<d.length;i+=1)h+='<option value="'+e[i]+'">'+d[i]+"</option>";return h+="</select>",h+="</fieldset>",g.append(h),$("#"+b).val(k.selected),g.trigger("create"),$("#"+b)},OGDSM.eGovFrameUI.prototype.autoSwitch=function(a,b,c,d){"use strict";d="undefined"!=typeof d?d:{};var e,f=$("#"+a),g="",h=([this.dataTheme,this.dataTheme],{theme:this.dataTheme,track_theme:this.dataTheme,switchName:b+"Name"});for(e in h)h.hasOwnProperty(e)&&d.hasOwnProperty(e)&&(h[e]=d[e]);return g='<select name="'+h.switchName+'" id="'+b+'" data-theme="'+h.theme+'" data-track-theme="'+h.track_theme+'" data-role="slider" data-inline="true">',g+='<option value="off">Off</option>',g+='<option value="on">On</option>',g+="</select>",f.append(g),f.trigger("create"),$("#"+b)},OGDSM.eGovFrameUI.prototype.timeInput=function(a){"use strict";var b,c;return b=$("#"+a),c='<input type="time" id="timeValue">',b.append(c),b.trigger("create"),$("#timeValue")},OGDSM.eGovFrameUI.prototype.dateInput=function(a){"use strict";var b,c;return b=$("#"+a),c='<input type="date" id="dateValue">',b.append(c),b.trigger("create"),$("#dateValue")},OGDSM.eGovFrameUI.prototype.baseMapRadioBox=function(a,b,c){"use strict";c="undefined"!=typeof c?c:null;var d,e;null!==c&&(e=c.split(" ")),d=this.autoRadioBox(b,"mapType",e,e,["h"]),d.change(function(){a.changeBaseMap($(this).val())})},OGDSM.eGovFrameUI.prototype.baseMapSelect=function(a,b,c){"use strict";c="undefined"!=typeof c?c:null;var d,e;null!==c&&(e=c.split(" ")),d=this.autoSelect(b,"mapType","selectMapType",e,e,{firstName:"맵 선택",selected:e[0],inline:!0}),a.changeBaseMap(e[0]),d.change(function(){a.changeBaseMap($(this).val())})},OGDSM.eGovFrameUI.prototype.vworldWMSList=function(a,b){"use strict";var c,d,e,f,g=("undefined"!=typeof b?b:this.dataTheme,$("#"+a)),h='<fieldset data-role="controlgroup" id="vworldWMS">',i=(this.OGDSM,["vworldWMSChk_1","vworldWMSChk_2","vworldWMSChk_3","vworldWMSChk_4","vworldWMSChk_5"]),j=[0,0,0,0,0];for(c=["LP_PA_CBND_BUBUN,LP_PA_CBND_BONBUN","LT_C_UQ111","LT_C_UQ112","LT_C_UQ113","LT_C_UQ114","LT_C_UQ121","LT_C_UQ122","LT_C_UQ123","LT_C_UQ124","LT_C_UQ125","LT_C_UQ126","LT_C_UQ127","LT_C_UQ128","LT_C_UQ129","LT_C_UQ130","LT_C_UQ141","LT_C_UQ162","LT_C_UD801","LT_L_MOCTLINK","LT_P_MOCTNODE","LT_C_LHZONE","LT_C_LHBLPN","LT_P_MGPRTFA","LT_P_MGPRTFB","LT_P_MGPRTFC","LT_P_MGPRTFD","LT_L_SPRD","LT_C_SPBD","LT_C_ADSIDO","LT_C_ADSIGG","LT_C_ADEMD","LT_C_ADRI","LT_C_TDWAREA","LT_C_DAMDAN","LT_C_DAMYOD","LT_C_DAMYOJ","LT_C_DAMYUCH","LT_C_RIRSV","LT_P_RIFCT","LT_P_UTISCCTV","LT_C_USFSFFB","LT_L_FRSTCLIMB","LT_P_CLIMBALL","LT_L_TRKROAD","LT_P_TRKROAD","LT_C_WKMBBSN","LT_C_WKMMBSN","LT_C_WKMSBSN","LT_C_WKMSTRM","LT_C_ASITSOILDRA","LT_C_ASITDEEPSOIL","LT_C_ASITSOILDEP","LT_C_ASITSURSTON","LT_L_AISROUTEU","LT_L_AISPATH","LT_C_AISALTC","LT_C_AISRFLC","LT_C_AISACMC","LT_C_AISCTRC","LT_C_AISMOAC","LT_C_AISADZC","LT_C_AISPRHC","LT_C_AISFIRC","LT_C_AISRESC","LT_C_AISDNGC","LT_C_AISTMAC","LT_C_AISCATC","LT_P_AISBLDG40F","LT_L_AISSEARCHL,LT_P_AISSEARCHP","LT_L_AISVFRPATH,LT_P_AISVFRPATH","LT_P_AISVFRPT,LT_P_AISVFRPT_SW,LT_P_AISVFRPT_SN","LT_L_AISCORRID_YS,LT_L_AISCORRID_GJ,LT_P_AISCORRID_YS,LT_P_AISCORRID_GJ","LT_P_AISHCSTRIP"],d=["지적도","도시지역","관리지역","농립지역","자연환경보전지역","경관지구","미관지구","고도지구","방화지구","방재지구","보존지구","시설보호지구","취락지구","개발진흥지구","특정용도제한지구","국토계획구역","도시자연공원구역","개발제한구역","교통링크","교통노드","사업지구경계도","토지이용계획도","아동안전지킴이집","노인복지시설","아동복지시설","기타보호시설","새주소도로","새주소건물","광역시도","시군구","읍면동","리","보행우선구역","단지경계","단지용도지역","단지시설용지","단지유치업종","저수지","수리시설","교통CCTV","소방서관할구역","등산로","등산로시설","둘레길링크","산책로분기점","대권역","중권역","표준권역","하천망","배수등급","심토토성","유효토심","자갈함량","제한고도","항공로","경계구역","공중급유구역","공중전투기동훈련장","관제권","군작전구역","방공식별구역","비행금지구역","비행정보구역","비행제한구역","위험구역","접근관제구역","훈련구역","건물군(40층이상)","수색비행장비행구역","시계비행로","시계비행보고지점","한강회랑","헬기장"],g.append(h),f=0;f<i.length;f+=1)this.autoSelect("vworldWMS",i[f],i[f],d,c,{firstName:f+1+"번째 레이어 선택"});return $("#"+i[0]).change(function(){for(j[0]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[1]).change(function(){for(j[1]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[2]).change(function(){for(j[2]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[3]).change(function(){for(j[3]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[4]).change(function(){for(j[4]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),i},OGDSM.eGovFrameUI.prototype.seoulEnvironment=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c,d={theme:this.dataTheme,path:"./images/openGDSMobile/"};for(c in d)d.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(d[c]=b[c]);var e,f,g=['<img src="'+d.path+'input_bt_pm10.png" width=30>','<img src="'+d.path+'input_bt_pm25.png" width=30>','<img src="'+d.path+'input_bt_so2.png" width=30>','<img src="'+d.path+'input_bt_o3.png" width=30>','<img src="'+d.path+'input_bt_no2.png" width=30>','<img src="'+d.path+'input_bt_co.png" width=30>'],h=["PM10","PM25","SO2","O3","NO2","CO"],i=($("#"+a),this.autoRadioBox(a,"visualType",["맵","차트"],["map","chart"],{horizontal:!0})),j=this.dateInput(a),k=this.timeInput(a);for(f=0;f<h.length;f+=3)e=this.autoRadioBox(a,"areenvTypeaType",[g[f],g[f+1],g[f+2]],[h[f],h[f+1],h[f+2]],{horizontal:!0});
return[i,j,k,e]},OGDSM.eGovFrameUI.prototype.dataPortalEnvironment=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c,d,e={theme:this.dataTheme,path:"./images/openGDSMobile/"};for(c in e)e.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(e[c]=b[c]);var f,g,h=['<img src="'+e.path+'input_bt_pm10.png" width=30>','<img src="'+e.path+'input_bt_pm25.png" width=30>','<img src="'+e.path+'input_bt_so2.png" width=30>','<img src="'+e.path+'input_bt_o3.png" width=30>','<img src="'+e.path+'input_bt_no2.png" width=30>','<img src="'+e.path+'input_bt_co.png" width=30>'],i=["pm10Value","pm25Value","so2value","o3Value","no2Value","coValue"],j=["인천","서울","경기","강원","충남","세종","충북","대전","경북","전북","대구","울산","전남","광주","경남","부산","제주"],k=["incheon","seoul","gyeonggi","gangwon","chungnam","sejong","chungbuk","daejeon","gyeongbuk","jeonbuk","daegu","ulsan","jeonnam","gwangju","gyeongnam","busan","jeju"],l=($("#"+a),this.autoRadioBox(a,"visualType",["맵","차트"],["map","chart"],{horizontal:!0}));for(d=0;d<j.length-2;d+=3)f=this.autoRadioBox(a,"areaType",[j[d],j[d+1],j[d+2]],[k[d],k[d+1],k[d+2]],{horizontal:!0});for(f=this.autoRadioBox(a,"areaType",[j[j.length-2],j[j.length-1]],[k[k.length-2],k[k.length-1]],{horizontal:!0}),d=0;d<i.length;d+=3)g=this.autoRadioBox(a,"areenvTypeaType",[h[d],h[d+1],h[d+2]],[i[d],i[d+1],i[d+2]],{horizontal:!0});return[l,f,g]},OGDSM.namesapce("mapLayerList"),function(a){"use strict";var b=[],c=[];return a.mapLayerList=function(a,b){this.listDiv=b,this.visualizationObj=a;var c=this,d=null,e=200,f=120,g=document.getElementById(b),h=document.createElement("div"),i=document.createElement("div"),j=document.createElement("div"),k=document.createElement("div"),l=document.createElement("ul"),m="레이어목록 보이기",n="position : absolute; background : rgba(255,255,255,0.0); top: 0px;  z-index : 1;",o="float : left; padding : 1px;	background : rgba(255,255,255,0.0); width : "+e+"px;",p="cursor:pointer; position : absolute; width:"+f+"px; height: 50px;",q="width: 100%; text-align:center;",r="list-style:none; padding:0; margin:0;",s=n+" left: "+-(e+3)+"px; transition: left 0.1s ease;",t=n+" left: 0px; transition: left 0.1s ease;",u="font-size : 90%; font-weight : bold; color : rgba(0, 0, 0,1.0); text-align:center;",v="font-size : 90%; font-weight : bold; color : rgba(0, 0, 0,.5); text-align:center;",w=p+"background: rgba(255, 255, 255, 0.5); left:"+(e+2)+"px; transition : background 0.1s ease, left 0.1s ease;"+u,x=p+"background: rgba(0, 0, 0, .0); left:"+(e-f)+"px; transition : background 0.1s ease, left 0.1s ease;"+v;d=function(){document.getElementById("listControl");"레이어목록 보이기"===m?(m="레이어목록 숨기기",g.style.cssText=t,i.style.cssText=x):(m="레이어목록 보이기",g.style.cssText=s,i.style.cssText=w),i.innerHTML=m},i.addEventListener("click",d,!1),i.addEventListener("touchstart",d,!1),g.style.cssText=s,h.id=b+"Root",h.style.cssText=o,j.style.cssText=q,j.setAttribute("class","ui-body-a"),j.innerHTML="<h4>레이어 목록</h4>",k.id=b+"Div",l.id=b+"Contents",l.style.cssText=r,h.appendChild(j),h.appendChild(k),k.appendChild(l),i.id=b+"Button",i.className="ol-unselectable",i.style.cssText=w,i.innerHTML=m,i.setAttribute("data-role","button"),g.appendChild(h),g.appendChild(i),this.ulObj=Sortable.create(document.getElementById(this.listDiv+"Contents"),{animation:150,handle:".drag-handle",onUpdate:function(a){var b,d=c.getLabels(),e=c.getLayersObj(),f=c.getVisualizationObj(),g=d.length-1,h=f.getMap().getLayers(),i=d[g-a.oldIndex],j=e[g-a.oldIndex];if(a.oldIndex>a.newIndex){for(b=g-a.oldIndex;b<g-a.newIndex;b++)d[b]=d[b+1],e[b]=e[b+1];d[g-a.newIndex]=i,e[g-a.newIndex]=j}else{for(b=g-a.oldIndex;b>g-a.newIndex;b--)d[b]=d[b-1],e[b]=e[b-1];d[g-a.newIndex]=i,e[g-a.newIndex]=j}for(b=0;b<e.length;b++)h.setAt(b+1,e[b]);c.setLayersObj(e),c.setLabels(d)}})},a.mapLayerList.prototype={constructor:a.mapLayerList,getLayersObj:function(){return b},setLayerObj:function(a){b.push(a)},setLayersObj:function(a){b=a},getLabels:function(){return c},setLabel:function(a){c.push(a)},setLabels:function(a){c=a},getVisualizationObj:function(){return this.visualizationObj},getThis:function(){return this}},a.mapLayerList}(OGDSM),OGDSM.mapLayerList.prototype.listManager=function(a,b,c,d){"use strict";function e(a){var b=a.currentTarget.getAttribute("data-label"),c=a.currentTarget.value,d=k.layerCheck(b);d.setOpacity(c/100)}function f(a){var b=a.currentTarget.getAttribute("data-label"),c=i.getLabels(),d=$.inArray(b,c);k.removeMap(b),c.splice(d,1),j.splice(d,1),i.setLayersObj(j),i.setLabels(c),$("#layer"+b).remove(),$("#popup"+b).hide()}function g(a){var b=a.currentTarget.getAttribute("data-label");a.currentTarget.checked?k.setVisible(b,!0):k.setVisible(b,!1)}d="undefined"!=typeof d?d:null;var h=$("#"+this.listDiv+"Contents"),i=this,j=(this.getLabels(),this.getLayersObj()),k=this.visualizationObj;this.setLayerObj(a),this.setLabel(b);var l=b;b.length>8&&(l=l.substr(0,8)+"..."),h.prepend('<li id="layer'+b+'" style="float:left"><div style="width:15%; float:left; margin-top:4px;"><canvas id="'+b+'canvas" width="100%" height=30px; class="drag-handle" ></canvas></div> <div style="width:70%; float:left; padding:0px; margin:0px;"><input type="checkbox" name="listCheckBox" data-corners="false" data-mini="true" style="width:100px;" class="custom" id="visualSW'+i.getLabels().length+'" data-label="'+b+'" checked/><label for="visualSW'+i.getLabels().length+'">'+l+'</label></div> <div style="width:15%; float:left; padding:0px; margin:0px;"><a data-role="button" data-rel="popup" data-theme="b" data-corners="false" data-mini="true" data-transition="pop"data-label="'+b+'" href="#popup'+b+'">　</a></div><div data-role="popup" id="popup'+b+'" style="width:200px"><input type="range" value="100" min="0" max="100" data-highlight="true" class="layer-manager"id="'+b+'slider" data-label="'+b+'"><a data-role="button" data-theme="f" data-mini="true"id="'+b+'delete" data-label="'+b+'">Delete</a></div></li>');var m=document.getElementById(b+"canvas").getContext("2d");"polygon"===d?(m.fillStyle=c,m.fillRect(5,5,20,20),m.strokeRect(5,5,20,20)):"point"===d?(m.beginPath(),m.arc(15,15,12,0,2*Math.PI),m.fillStyle=c,m.fill(),m.stroke()):"line"===d?(m.moveTo(5,5),m.lineTo(20,20),m.strokeStyle=c,m.stroke()):(m.fillStyle="rgb(0, 0, 0)",m.fillRect(5,5,20,20),m.strokeRect(5,5,20,20)),$("#layer"+b).trigger("create"),$("#"+b+"slider").bind("change",e),$("#"+b+"delete").bind("click",f),$("input[name=listCheckBox]").bind("click",g)},OGDSM.mapLayerList.prototype.removelist=function(a){"use strict";var b=this.getLabels(),c=this.getLayersObj(),d=$.inArray(a,b);b.splice(d,1),c.splice(d,1),$("#layer"+a).remove()},OGDSM.namesapce("attributeTable"),function(a){"use strict";return a.attributeTable=function(a,b){this.rootDiv=a,this.addr=b;var c=document.getElementById(a),d=document.createElement("ul"),e=document.createElement("div"),f="width: 100%; height: 100%; background: rgba(255, 255, 255, 1); margin: 0px;",g="list-style: none; position: relative; margin: 0px; z-index: 2; top: 1px; display: table; border-left: 1px solid #f5ab36;";d.id=a+"Tab",d.style.cssText=g,e.id=a+"Contents",e.style.cssText=f,c.appendChild(d),c.appendChild(e)},a.attributeTable.prototype={constructor:a.attributeTable},a.attributeTable}(OGDSM),OGDSM.attributeTable.prototype.addAttribute=function(a){"use strict";function b(b){$("#"+d+"Tab a").css("border-bottom",""),$("#"+d+"Tab a").css("color",i),$("#"+d+"Tab a").css("background",h),$(b.currentTarget).css("border-bottom",l),$(b.currentTarget).css("background",j),$(b.currentTarget).css("color",k),$(".attrTable").hide(),$("#divAttrTable"+a).css("display","block")}function c(a,b,c,d){$.each(a,function(a,e){if("geom"===a)return!0;0===b&&d.append("<th>"+a+"</th>");var f=c.find("tr:last");f.append("<td>"+e+"</td>")})}var d=this.rootDiv,e=$("#"+d+"Tab"),f=$("#"+d+"Contents"),g="background:#ffd89b; color: #222; display:block; padding:6px 15px; text-decoration:none; border-right:1px solid #f5ab36;border-top:1px solid #f5ab36; border-right:1px solid #f5ab36; margin:0;",h="#ffd89b",i="#222",j="#fff",k="#344385",l="1px solid #fff";e.prepend('<li id="attrTab'+a+'" style="float:left;"><a href="#" style="'+g+'">'+a+"</a></li>"),$("#"+d+"Tab a").css("border-bottom",""),$("#"+d+"Tab a").css("color",i),$("#"+d+"Tab a").css("background",h),$("#attrTab"+a+" a").css("border-bottom",l),$("#attrTab"+a+" a").css("background",j),$("#attrTab"+a+" a").css("color",k);var m=$("#"+d+"Contents").height();f.prepend('<div id="divAttrTable'+a+'" class="attrTable"><table id="attrTable'+a+'" class="display compact" cellspacing="0" width="100%"><thead style="width:100%;"><tr></tr></thead><tbody></tbody></table></div>'),$(".attrTable").hide(),$("#divAttrTable"+a).css("display","block"),$("#attrTab"+a+" a").bind("click",b);var n='{"tableName":"'+a+'"}';n=JSON.parse(n),$.ajax({type:"POST",url:this.addr,data:JSON.stringify(n),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(b){var e=b.data,f=0;if(null===e)return console.log("Not attribute information"),-1;var g=$("#attrTable"+a),h=g.find("thead").find("tr"),i=g.find("tbody");for(f=0;f<e.length;f++)i.append("<tr>"),c(e[f],f,i,h),i.append("</tr>");var j=$("thead").height()+7;$("#attrTable"+a).DataTable({paging:!1,scrollY:m-j,scrollX:!0,scrollCollapse:!0,bFilter:!1}),$(window).on("resize",function(){var a=$("#"+d+"Contents").height(),b=$("thead").height()+7;$(".divAttrTable table").DataTable({paging:!1,scrollY:a-b,scrollX:!0,scrollCollapse:!0,bFilter:!1})})},error:function(a){console.log(a)}})};
