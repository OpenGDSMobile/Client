/* 2015-11-18 */ var OGDSM=OGDSM||{};OGDSM=function(){"use strict";return OGDSM.prototype={constructor:OGDSM,version:"1.2"},OGDSM}(window,jQuery),OGDSM.namesapce=function(a){"use strict";var b,c=a.split("."),d=OGDSM;for("OGDSM"===d[0]&&(c=c.slice(1)),b=0;b<c.length;b+=1)"undefined"==typeof d[c[b]]&&(d[c[b]]={}),d=d[c[b]];return d},OGDSM.jsonToArray=function(a,b,c){"use strict";var d=[],e=a.row;return d[0]=[],d[1]=[],$.each(e,function(a){d[0].push(e[a][b]),d[1].push(e[a][c])}),d},OGDSM.applyOptions=function(a,b){"use strict";var c=null;for(c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(a[c]=b[c]);return a},function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,b){this.el=a,this.options=b=b||{};var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1};for(var e in d)!(e in b)&&(b[e]=d[e]);var g=b.group;g&&"object"==typeof g||(g=b.group={name:g}),["pull","put"].forEach(function(a){a in g||(g[a]=!0)}),M.forEach(function(d){b[d]=c(this,b[d]||N),f(a,d.substr(2).toLowerCase(),b[d])},this),b.groups=" "+g.name+(g.put.join?" "+g.put.join(" "):"")+" ",a[F]=b;for(var h in this)"_"===h.charAt(0)&&(this[h]=c(this,this[h]));f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),f(a,"dragover",this),f(a,"dragenter",this),Q.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a){s&&s.state!==a&&(i(s,"display",a?"none":""),!a&&s.state&&t.insertBefore(s,q),s.state=a)}function c(a,b){var c=P.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(P.call(arguments)))}}function d(a,b,c){if(a){c=c||H,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName.toUpperCase()==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function e(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function f(a,b,c){a.addEventListener(b,c,!1)}function g(a,b,c){a.removeEventListener(b,c,!1)}function h(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function i(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return H.defaultView&&H.defaultView.getComputedStyle?c=H.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function j(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function k(a){a.draggable=!1}function l(){K=!1}function m(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5&&c}function n(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function o(a){for(var b=0;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&b++;return b}function p(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E={},F="Sortable"+(new Date).getTime(),G=window,H=G.document,I=G.parseInt,J=!!("draggable"in H.createElement("div")),K=!1,L=function(a,b,c,d,e,f){var g=H.createEvent("Event");g.initEvent(b,!0,!0),g.item=c||a,g.from=d||a,g.clone=s,g.oldIndex=e,g.newIndex=f,a.dispatchEvent(g)},M="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),N=function(){},O=Math.abs,P=[].slice,Q=[],R=p(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h=b.scrollSensitivity,i=b.scrollSpeed,j=a.clientX,k=a.clientY,l=window.innerWidth,m=window.innerHeight;if(w!==c&&(v=b.scroll,w=c,v===!0)){v=c;do if(v.offsetWidth<v.scrollWidth||v.offsetHeight<v.scrollHeight)break;while(v=v.parentNode)}v&&(d=v,e=v.getBoundingClientRect(),f=(O(e.right-j)<=h)-(O(e.left-j)<=h),g=(O(e.bottom-k)<=h)-(O(e.top-k)<=h)),f||g||(f=(h>=l-j)-(h>=j),g=(h>=m-k)-(h>=k),(f||g)&&(d=G)),(E.vx!==f||E.vy!==g||E.el!==d)&&(E.el=d,E.vx=f,E.vy=g,clearInterval(E.pid),d&&(E.pid=setInterval(function(){d===G?G.scrollTo(G.scrollX+f*i,G.scrollY+g*i):(g&&(d.scrollTop+=g*i),f&&(d.scrollLeft+=f*i))},24)))}},30);return a.prototype={constructor:a,_dragStarted:function(){t&&q&&(h(q,this.options.ghostClass,!0),a.active=this,L(t,"start",q,t,z))},_onTapStart:function(a){var b=a.type,c=a.touches&&a.touches[0],e=(c||a).target,g=e,h=this.options,i=this.el,l=h.filter;if(!("mousedown"===b&&0!==a.button||h.disabled)&&(e=d(e,h.draggable,i))){if(z=o(e),"function"==typeof l){if(l.call(this,a,e,this))return L(g,"filter",e,i,z),void a.preventDefault()}else if(l&&(l=l.split(",").some(function(a){return a=d(g,a.trim(),i),a?(L(a,"filter",e,i,z),!0):void 0})))return void a.preventDefault();if((!h.handle||d(g,h.handle,i))&&e&&!q&&e.parentNode===i){C=a,t=this.el,q=e,u=q.nextSibling,B=this.options.group,q.draggable=!0,h.ignore.split(",").forEach(function(a){j(e,a.trim(),k)}),c&&(C={target:e,clientX:c.clientX,clientY:c.clientY},this._onDragStart(C,"touch"),a.preventDefault()),f(H,"mouseup",this._onDrop),f(H,"touchend",this._onDrop),f(H,"touchcancel",this._onDrop),f(q,"dragend",this),f(t,"dragstart",this._onDragStart),J||this._onDragStart(C,!0);try{H.selection?H.selection.empty():window.getSelection().removeAllRanges()}catch(m){}}}},_emulateDragOver:function(){if(D){i(r,"display","none");var a=H.elementFromPoint(D.clientX,D.clientY),b=a,c=" "+this.options.group.name,d=Q.length;if(b)do{if(b[F]&&b[F].groups.indexOf(c)>-1){for(;d--;)Q[d]({clientX:D.clientX,clientY:D.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);i(r,"display","")}},_onTouchMove:function(a){if(C){var b=a.touches?a.touches[0]:a,c=b.clientX-C.clientX,d=b.clientY-C.clientY,e=a.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";D=b,i(r,"webkitTransform",e),i(r,"mozTransform",e),i(r,"msTransform",e),i(r,"transform",e),a.preventDefault()}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;if(this._offUpEvents(),"clone"==B.pull&&(s=q.cloneNode(!0),i(s,"display","none"),t.insertBefore(s,q)),b){var e,g=q.getBoundingClientRect(),h=i(q);r=q.cloneNode(!0),i(r,"top",g.top-I(h.marginTop,10)),i(r,"left",g.left-I(h.marginLeft,10)),i(r,"width",g.width),i(r,"height",g.height),i(r,"opacity","0.8"),i(r,"position","fixed"),i(r,"zIndex","100000"),t.appendChild(r),e=r.getBoundingClientRect(),i(r,"width",2*g.width-e.width),i(r,"height",2*g.height-e.height),"touch"===b?(f(H,"touchmove",this._onTouchMove),f(H,"touchend",this._onDrop),f(H,"touchcancel",this._onDrop)):(f(H,"mousemove",this._onTouchMove),f(H,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,q)),f(H,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(a){var c,e,f,g=this.el,h=this.options,j=h.group,k=j.put,n=B===j,o=h.sort;if(q&&(void 0!==a.preventDefault&&(a.preventDefault(),!h.dragoverBubble&&a.stopPropagation()),B&&!h.disabled&&(n?o||(f=!t.contains(q)):B.pull&&k&&(B.name===j.name||k.indexOf&&~k.indexOf(B.name)))&&(void 0===a.rootEl||a.rootEl===this.el))){if(R(a,h,this.el),K)return;if(c=d(a.target,h.draggable,g),e=q.getBoundingClientRect(),f)return b(!0),void(s||u?t.insertBefore(q,s||u):o||t.appendChild(q));if(0===g.children.length||g.children[0]===r||g===a.target&&(c=m(g,a))){if(c){if(c.animated)return;v=c.getBoundingClientRect()}b(n),g.appendChild(q),this._animate(e,q),c&&this._animate(v,c)}else if(c&&!c.animated&&c!==q&&void 0!==c.parentNode[F]){x!==c&&(x=c,y=i(c));var p,v=c.getBoundingClientRect(),w=v.right-v.left,z=v.bottom-v.top,A=/left|right|inline/.test(y.cssFloat+y.display),C=c.offsetWidth>q.offsetWidth,D=c.offsetHeight>q.offsetHeight,E=(A?(a.clientX-v.left)/w:(a.clientY-v.top)/z)>.5,G=c.nextElementSibling;K=!0,setTimeout(l,30),b(n),p=A?c.previousElementSibling===q&&!C||E&&C:G!==q&&!D||E&&D,p&&!G?g.appendChild(q):c.parentNode.insertBefore(q,p?G:c),this._animate(e,q),this._animate(v,c)}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();i(b,"transition","none"),i(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,i(b,"transition","all "+c+"ms"),i(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){i(b,"transition",""),i(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){g(H,"mouseup",this._onDrop),g(H,"touchmove",this._onTouchMove),g(H,"touchend",this._onDrop),g(H,"touchcancel",this._onDrop)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(E.pid),g(H,"drop",this),g(H,"mousemove",this._onTouchMove),g(c,"dragstart",this._onDragStart),this._offUpEvents(),b&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation(),r&&r.parentNode.removeChild(r),q&&(g(q,"dragend",this),k(q),h(q,this.options.ghostClass,!1),t!==q.parentNode?(A=o(q),L(q.parentNode,"sort",q,t,z,A),L(t,"sort",q,t,z,A),L(q,"add",q,t,z,A),L(t,"remove",q,t,z,A)):(s&&s.parentNode.removeChild(s),q.nextSibling!==u&&(A=o(q),L(t,"update",q,t,z,A),L(t,"sort",q,t,z,A))),a.active&&L(t,"end",q,t,z,A)),t=q=r=u=s=v=w=C=D=x=y=B=a.active=null,this.save())},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?(this._onDragOver(a),e(a)):("drop"===b||"dragend"===b)&&this._onDrop(a)},toArray:function(){for(var a,b=[],c=this.el.children,e=0,f=c.length;f>e;e++)a=c[e],d(a,this.options.draggable,this.el)&&b.push(a.getAttribute("data-id")||n(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){var f=c.children[e];d(f,this.options.draggable,c)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return d(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:void(c[a]=b)},destroy:function(){var a=this.el,b=this.options;M.forEach(function(c){g(a,c.substr(2).toLowerCase(),b[c])}),g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"dragover",this),g(a,"dragenter",this),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),Q.splice(Q.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},a.utils={on:f,off:g,css:i,find:j,bind:c,is:function(a,b){return!!d(a,b,a)},throttle:p,closest:d,toggleClass:h,dispatchEvent:L,index:o},a.version="1.1.1",a.create=function(b,c){return new a(b,c)},a}),OGDSM.namesapce("visualization"),function(a){"use strict";return a.visualization=function(b,c){c="undefined"!=typeof c?c:{};var d;this.updateLayoutSetting(b),this.mapDiv=b,this.geoLocation=null,this.featureOverlay=null,a.visualization=this;var e={layerListDiv:null,attrTableDiv:null,attrAddr:"",indexedDB:!0};for(d in e)e.hasOwnProperty(d)&&c.hasOwnProperty(d)&&(e[d]=c[d]);$(window).on("resize",function(){a.visualization.updateLayoutSetting()}),null!==e.attrTableDiv&&(this.attrTableObj=new a.attributeTable(e.attrTableDiv,e.attrAddr,this,e.indexedDB)),null!==e.layerListDiv&&(this.layerListObj=new a.mapLayerList(this,e.layerListDiv,{attrObj:this.attrTableObj}))},a.visualization.prototype={constructor:a.visualization,getMap:function(){return this.mapObj},getLayersTitle:function(){var a,b=this.getMap().getLayers().getArray(),c=[];for(a=1;a<b.length;a+=1){var d={};d.id=a,d.title=b[a].get("title"),c.push(d)}return c},layerCheck:function(a){var b,c=this.getMap().getLayers().getArray();for(b=0;b<c.length;b+=1)if(c[b].get("title")===a)return c[b];return!1},indexOf:function(a,b){var c,d=a.getLength();for(c=0;d>c;c++)if(b===a.item(c))return c;return-1},getAttrObj:function(){return this.attrTableObj},getFeatureOverlay:function(){return this.featureOverlay}},a.visualization}(OGDSM),OGDSM.visualization.prototype.olMapView=function(a,b,c){"use strict";a="undefined"!=typeof a?a:[37.5822,127.010031],b="undefined"!=typeof b?b:"OSM",c="undefined"!=typeof c?c:"EPSG:3857";var d=null,e=null,f=new ol.proj.Projection({code:"EPSG:5181",extent:[-219825.99,-535028.96,819486.07,777525.22],units:"m"}),g=new ol.proj.Projection({code:"EPSG:5179",extent:[531371.84,967246.47,1576674.68,2274021.31],units:"m"});ol.proj.addProjection(f),ol.proj.addProjection(g);var h=new ol.View({projection:ol.proj.get(c),center:ol.proj.transform(a,"EPSG:4326",c),zoom:12,maxZoom:18,minZoom:6});d=new ol.Map({target:this.mapDiv,layers:[new ol.layer.Tile({title:"basemap",source:e})],view:h,controls:[]}),this.featureOverlay=new ol.FeatureOverlay({map:d,style:function(){var a=new ol.style.Stroke({color:"rgba(255, 0, 0, 1.0)",width:3});return function(b){var c=b.getGeometry().getType(),d=new ol.style.Circle({radius:10,fill:b.get("styleCircle").getFill(),stroke:a});return"MultiPolygon"===c?[new ol.style.Style({fill:b.get("styleFill"),stroke:a,text:b.get("styleText")})]:"Point"===c?[new ol.style.Style({image:d,text:b.get("styleText")})]:void 0}}()});var i=this.featureOverlay;return this.interaction=new ol.interaction.Select({layers:function(){return!0},style:function(){new ol.style.Stroke({color:"rgba(255, 0, 0, 1.0)",width:3});return i.getStyle()}()}),d.addInteraction(this.interaction),this.mapObj=d,this.baseProj=c,this.changeBaseMap(b),this.mapObj.updateSize(),this.mapObj},OGDSM.visualization.prototype.changeBaseMap=function(a){"use strict";var b=null,c=null,d=null,e=this.mapObj,f=e.getLayers(),g=e.getView().getCenter(),h=e.getView().getZoom(),i=e.getView().getProjection();if(f.forEach(function(a){var b=a.get("title");"basemap"===b&&(d=a)}),"OSM"===a)b=new ol.source.OSM,c=new ol.View({projection:i,center:g,zoom:h});else if("VWorld"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/Base/201310/{z}/{x}/{y}.png"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else if("VWorld_s"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/Satellite/201301/{z}/{x}/{y}.jpeg"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else if("VWorld_g"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/gray/201411/{z}/{x}/{y}.png"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else if("VWorld_m"===a)b=new ol.source.XYZ({url:"http://xdworld.vworld.kr:8080/2d/midnight/201411/{z}/{x}/{y}.png"}),c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6});else{if(""!==a)return console.error('Not Map Style "OSM" | "VWorld" | "VWorld_m" | "VWorld_h"'),null;b=null,c=new ol.View({projection:i,center:g,zoom:h,maxZoom:18,minZoom:6})}null!==d&&(e.setView(c),d.setSource(b))},OGDSM.visualization.prototype.trackingGeoLocation=function(a){"use strict";var b=this.geoLocation,c=this.mapObj;return"undefined"==typeof this.mapObj?(console.error("Not Create Map!!"),null):(null===b&&(b=new ol.Geolocation({projection:c.getView().getProjection(),tracking:!0})),void(a===!0&&b.once("change:position",function(){c.getView().setCenter(b.getPosition())})))},OGDSM.visualization.prototype.updateLayoutSetting=function(a){"use strict";a="undefined"!=typeof a?a:this.mapDiv,"undefined"!=typeof this.mapObj&&this.mapObj.updateSize()},OGDSM.visualization.prototype.addMap=function(a){"use strict";var b=this.layerCheck(a.get("title")),c=this.featureOverlay,d=this.interaction,e=this.getMap();if(b===!0)return console.log("OpenGDS Mobile : Layer is existence"),-1;if(e.addLayer(a),c.getFeatures().clear(),"undefined"!=typeof this.layerListObj){var f,g=a.getSource().getFeatures()[0].getGeometry(),h=g.getType();f="undefined"!=typeof a.getStyle?a.get("styleFill"):"rgb(0, 0, 0)",this.layerListObj.addList(a,a.get("title"),f,h)}if("undefined"!=typeof this.attrTableObj){var i=this.attrTableObj;i.addAttribute(a.get("title")),d.getFeatures().on("add",function(b){var d=b.target.item(0).get("label"),e=b.target.item(0).get(d);c.getFeatures().clear(),i.selectAttribute(a.get("title"),d,e,i)}),c.getFeatures().on("add",function(){i.unSelectAttribute(i),e.removeInteraction(d),e.addInteraction(d)})}},OGDSM.visualization.prototype.imageLayer=function(a,b,c,d){"use strict";var e=null,f=b;e=new ol.layer.Image({opacity:1,title:f,source:new ol.source.ImageStatic({url:a+"?"+Math.random(),imageSize:c,projection:new ol.proj.Projection({code:"EPSG:3857"}),imageExtent:d})}),this.getMap().addLayer(e)},OGDSM.visualization.prototype.removeMap=function(a){"use strict";var b=this.layerCheck(a);b!==!1&&(this.getMap().removeLayer(b),"undefined"!=typeof this.layerListObj&&this.layerListObj.removeList(a))},OGDSM.visualization.prototype.setVisible=function(a,b){"use strict";var c=this.layerCheck(a);c!==!1&&c.setVisible(b)},OGDSM.visualization.prototype.changeWFSStyle=function(a,b,c){"use strict";var d,e=this.layerCheck(a),f={};c="undefined"!=typeof c?c:{};var g={type:"polygon",opt:.5,attr:null,range:null,data:null,rootKey:null,labelKey:null,valueKey:null};for(d in g)g.hasOwnProperty(d)&&c.hasOwnProperty(d)&&(g[d]=c[d]);if(e===!1)return console.error("Not Map Layer"),-1;var h=g.data[g.rootKey];e.setStyle(function(a,c){var d,e,i="#FFFFFF",j=5e3>c?a.get(g.attr):"";if(!f[j]){if(Array.isArray(b)){for(d=0;d<h.length;d+=1)if(j===h[d][g.labelKey])for(e=0;e<g.range.length;e+=1)if(h[d][g.valueKey]<=g.range[e]){i=b[e];break}}else i=b;"polygon"===g.type?f[j]=[new ol.style.Style({fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:"#00000",width:1}),text:new ol.style.Text({font:"9px Calibri,sans-serif",text:j,fill:new ol.style.Fill({color:"#000000"})})})]:"point"===g.type&&(f[j]=[new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:"#000000",width:1})})})])}return f[j]}),e.setOpacity(g.opt)},OGDSM.namesapce("externalConnection"),function(a){"use strict";return a.externalConnection=function(){},a.externalConnection.prototype={constructor:a.externalConnection},a.externalConnection}(OGDSM),OGDSM.externalConnection.prototype.formAjaxRequest=function(a,b,c,d){"use strict";$("#"+c).click(function(){var c=$("#"+b).serialize();console.log(c),$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),$.ajax({type:"POST",url:a,cache:!1,data:c,success:function(a){d(a)},error:function(a){console.log(a)}})})},OGDSM.externalConnection.prototype.ajaxRequest=function(a,b){"use strict";function c(){$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),$.ajax({type:"POST",url:a,cache:!1,data:JSON.stringify(d.data),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(a){d.callback(a),$.mobile.loading("hide")},error:function(){console.log("OpenGDS Mobile Log : Server Error"),$.mobile.loading("hide")}})}b="undefined"!=typeof b?b:{};var d={data:null,submitBtn:null,callback:function(){console.log("Please create callback function")}};d=OGDSM.applyOptions(d,b),null!==d.submitBtn?$("#"+d.submitBtn).click(function(){c()}):c()},OGDSM.externalConnection.prototype.geoServerGeoJsonLoad=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{},console.log(d);var f=b+"/geoserver/wfs?service=WFS&version=1.1.0&request=GetFeature&typeNames="+c+":"+d.split("--")[0]+"&outputFormat=json&srsname="+a.baseProj,g={color:"rgba(0, 0, 0, 0.0)",label:null,callback:function(){}};g=OGDSM.applyOptions(g,e),$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),d=d.replace(/[ \{\}\[\]\/?.,;:|\)*~`!\+┼<>@\#$%&\'\"\\\(\=]/gi),$.ajax({type:"POST",url:f,crossDomain:!0,dataType:"json",success:function(b){var c=new ol.layer.Vector({title:d,source:new ol.source.Vector({features:(new ol.format.GeoJSON).readFeatures(b)}),style:function(){var a=new ol.style.Fill({color:g.color}),b=new ol.style.Stroke({color:"rgba(0, 0, 0, 1.0)",width:1}),c=new ol.style.Circle({radius:10,fill:a,stroke:b});return function(d){var e=d.getGeometry().getType(),f=null;return null!==g.label&&(f=new ol.style.Text({font:"12px Calibri, sans-serif",text:d.get(g.label),fill:new ol.style.Fill({color:"#000"}),stroke:new ol.style.Stroke({color:"#fff",width:3})}),d.set("label",g.label)),d.set("styleFill",a),d.set("styleStroke",b),d.set("styleCircle",c),d.set("styleText",f),"MultiPolygon"===e?[new ol.style.Style({fill:a,stroke:b,text:f})]:"Point"===e?[new ol.style.Style({image:c,text:f})]:void 0}}()});c.set("styleFill",g.color),a.addMap(c,g.type),$.mobile.loading("hide"),g.callback(c)},error:function(a){console.log(a),$.mobile.loading("hide")}})},OGDSM.externalConnection.prototype.vworldWMSLoad=function(a,b,c){"use strict";c=c.join(",");var d=new ol.layer.Tile({title:"VWorldWMS",source:new ol.source.TileWMS({url:"http://map.vworld.kr/js/wms.do",params:{apiKey:a,domain:b,LAYERS:c,STYLES:c,FORMAT:"image/png",CRS:"EPSG:900913",EXCEPTIONS:"text/xml",TRANSPARENT:!0}})});return d},OGDSM.externalConnection.prototype.publicDataInterface=function(a,b,c){"use strict";$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),$.ajax({type:"POST",url:a,data:JSON.stringify(b),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(a){$.mobile.loading("hide"),"OK"===a.result?c(JSON.parse(a.data)):alert("데이터를 불러오는데 실패하였습니다")},error:function(a){$.mobile.loading("hide"),console.error(a)}})},OGDSM.externalConnection.prototype.seoulEnvironmentLoad=function(a,b,c,d,e,f){"use strict";var g={};g.serviceKey=b,g.returnType="json",g.serviceName="TimeAverageAirQuality",g.amount="1/100",g.dateTimeValue=d+e,g.envType=c,this.publicDataInterface(a,g,function(a){f(a)})},OGDSM.externalConnection.prototype.dataPortalEnvironmentLoad=function(a,b,c,d,e){"use strict";var f={};f.serviceName="ArpltnInforInqireSvc",f.numOfRows="100",f.serviceKey=b,f.envType=c,f.sidoName=encodeURIComponent(d),this.publicDataInterface(a,f,function(a){e(a)})},OGDSM.externalConnection.prototype.greenGasEmissionLoad=function(a,b,c,d,e){"use strict";var f={};f.serviceName="GreenGasEmissionReport",f.numOfRows="100",f.serviceKey=b,f.startDate=c,f.endDate=d,this.publicDataInterface(a,f,function(a){e(a)})},OGDSM.externalConnection.prototype.realTimeLevelofRadiationLoad=function(a,b,c,d){"use strict";var e={};e.serviceName="NuclearPowerPlantRealtimeLevelofRadiation",e.serviceKey=b,e.startDate=c,this.publicDataInterface(a,e,function(a){d(a)})},OGDSM.externalConnection.prototype.getLayersGeoServer=function(a,b,c){"use strict";var d={wsName:b};$.mobile.loading("show",{text:"Loading",textVisible:"true",theme:"c",textonlt:"false"}),$.ajax({type:"POST",url:a,data:JSON.stringify(d),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(a){var b=a.data;$.mobile.loading("hide"),c(b)},error:function(a){console.error(a)}})},OGDSM.namesapce("eGovFrameUI"),function(a){"use strict";return a.eGovFrameUI=function(a){a="undefined"!=typeof a?a:null,this.dataTheme=null!==a?a:"c"},a.eGovFrameUI.prototype={constructor:a.eGovFrameUI},a.eGovFrameUI}(OGDSM),OGDSM.eGovFrameUI.prototype.autoButton=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{};var f=$("#"+a),g='<a data-role="button" id="'+b+'" href="'+d+'" ',h={theme:this.dataTheme,corners:!0,inline:!1,mini:!1};return h=OGDSM.applyOptions(h,e),g+='data-theme="'+h.theme+'" data-corners="'+h.corners+'" data-inline="'+h.inline+'" data-mini="'+h.mini+'"',g+=">"+c+"</a>",f.append(g),f.trigger("create"),$("#"+b)},OGDSM.eGovFrameUI.prototype.autoCheckBox=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{};var f=$("#"+a),g="",h=0,i={checkName:b+"Name",theme:this.dataTheme,horizontal:!1};if(i=OGDSM.applyOptions(i,e),g="",Array.isArray(c)){for(g+='<fieldset data-role="controlgroup" ',g+=i.horizontal?'data-type="horizontal">':">",h=0;h<c.length;h+=1)g+='<input type="checkbox" name="'+i.checkName+'" id="'+b+h+'" value="'+d[h]+'" ',g+='data-theme="'+i.theme+'" class="custom"/>',g+='<label for="'+b+h+'">'+c[h]+"</label>";g+="</fieldset>"}else g+='<input type="checkbox" name="'+i.checkName+'" id="'+b+'" value="'+d[h]+'" ',g+='data-theme="'+i.theme+'" class="custom"/>',g+='<label for="'+b+'">'+c+"</label>";return f.append(g),f.trigger("create"),$("input[name="+i.checkName+"]:checkbox")},OGDSM.eGovFrameUI.prototype.autoRadioBox=function(a,b,c,d,e){"use strict";e="undefined"!=typeof e?e:{};var f=$("#"+a),g='<fieldset data-role="controlgroup" style="margin:0px; align:center;"',h=0,i={radioName:b+"Name",horizontal:!1,theme:this.dataTheme};for(i=OGDSM.applyOptions(i,e),g+=i.horizontal?'data-theme="'+i.theme+'" data-type="horizontal">':'data-theme="'+i.theme+'">',h=0;h<c.length;h+=1)g+='<input type="radio"name="'+i.radioName+'" id="'+b+h+'" value="'+d[h]+'" ',g+='data-theme="'+i.theme+'" class="custom" ',g+=0===h?'checked="checked" />':"/>",g+='<label for="'+b+h+'">'+c[h]+"</label>";return g+="</fieldset>",f.append(g),f.trigger("create"),$("input[name="+i.radioName+"]:radio")},OGDSM.eGovFrameUI.prototype.autoSelect=function(a,b,c,d,e,f){"use strict";f="undefined"!=typeof f?f:{};var g=$("#"+a),h=null,i=0,j={firstName:"",theme:this.dataTheme,corners:!0,inline:!1,selected:0,mini:!1};for(j=OGDSM.applyOptions(j,f),h='<select name="'+c+'" id="'+b+'" data-mini="'+j.mini+'" data-theme="'+j.theme+'" data-corners="'+j.corners+'" data-inline="'+j.inline+'">',h+='<option value=""> '+j.firstName+"</option>",i=0;i<d.length;i+=1)h+='<option value="'+e[i]+'">'+d[i]+"</option>";return h+="</select>",h+="</fieldset>",g.append(h),$("#"+b).val(j.selected),g.trigger("create"),$("#"+b)},OGDSM.eGovFrameUI.prototype.autoSwitch=function(a,b,c,d){"use strict";d="undefined"!=typeof d?d:{};var e=$("#"+a),f="",g={theme:this.dataTheme,track_theme:this.dataTheme,switchName:b+"Name"};return g=OGDSM.applyOptions(g,d),f='<select name="'+g.switchName+'" id="'+b+'" data-theme="'+g.theme+'" data-track-theme="'+g.track_theme+'" data-role="slider" data-inline="true">',f+='<option value="off">Off</option>',f+='<option value="on">On</option>',f+="</select>",e.append(f),e.trigger("create"),$("#"+b)},OGDSM.eGovFrameUI.prototype.autoListView=function(a,b,c,d){"use strict";d="undefined"!=typeof d?d:{};var e=$("#"+a),f="",g=0,h={inset:!0,link:!0,itemKey:"title",divide:"",noDataTitle:"데이터 없음"};h=OGDSM.applyOptions(h,d),f='<ul id="'+b+'" data-role="listview" data-inset="'+h.inset+'">',""!==h.divide&&(f+='<li data-role="list-divider">'+h.divide+"</li>"),(null===c||0===c.length)&&(f+="<li>"+h.noDataTitle+"</li>");for(g in c)c.hasOwnProperty(g)&&(f+='<li data-title="'+c[g][h.itemKey]+'">',h.link?(f+='<a href="#">',f+=c[g][h.itemKey]+"</a>"):f+=c[g][h.itemKey],f+="</li>");return f+="</ul>",e.append(f),e.trigger("create"),$("#"+b+" li")},OGDSM.eGovFrameUI.prototype.timeInput=function(a){"use strict";var b,c;return b=$("#"+a),c='<input type="time" id="timeValue">',b.append(c),b.trigger("create"),$("#timeValue")},OGDSM.eGovFrameUI.prototype.dateInput=function(a,b){"use strict";b="undefined"!=typeof b?b:"date";var c,d;return c=$("#"+a),d='<input type="'+b+'" id="dateValue">',c.append(d),c.trigger("create"),$("#dateValue")},OGDSM.eGovFrameUI.prototype.baseMapRadioBox=function(a,b,c){"use strict";c="undefined"!=typeof c?c:null;var d,e;null!==c&&(e=c.split(" ")),d=this.autoRadioBox(b,"mapType",e,e,{horizontal:!0}),d.change(function(){a.changeBaseMap($(this).val())})},OGDSM.eGovFrameUI.prototype.baseMapSelect=function(a,b,c){"use strict";c="undefined"!=typeof c?c:null;var d,e;null!==c&&(e=c.split(" ")),d=this.autoSelect(b,"mapType","selectMapType",e,e,{firstName:"맵 선택",selected:e[0],inline:!0,mini:!0}),a.changeBaseMap(e[0]),d.change(function(){a.changeBaseMap($(this).val())})},OGDSM.eGovFrameUI.prototype.vworldWMSList=function(a,b){"use strict";var c,d,e,f,g=("undefined"!=typeof b?b:this.dataTheme,$("#"+a)),h='<fieldset data-role="controlgroup" id="vworldWMS">',i=(this.OGDSM,["vworldWMSChk_1","vworldWMSChk_2","vworldWMSChk_3","vworldWMSChk_4","vworldWMSChk_5"]),j=[0,0,0,0,0];for(c=["LP_PA_CBND_BUBUN,LP_PA_CBND_BONBUN","LT_C_UQ111","LT_C_UQ112","LT_C_UQ113","LT_C_UQ114","LT_C_UQ121","LT_C_UQ122","LT_C_UQ123","LT_C_UQ124","LT_C_UQ125","LT_C_UQ126","LT_C_UQ127","LT_C_UQ128","LT_C_UQ129","LT_C_UQ130","LT_C_UQ141","LT_C_UQ162","LT_C_UD801","LT_L_MOCTLINK","LT_P_MOCTNODE","LT_C_LHZONE","LT_C_LHBLPN","LT_P_MGPRTFA","LT_P_MGPRTFB","LT_P_MGPRTFC","LT_P_MGPRTFD","LT_L_SPRD","LT_C_SPBD","LT_C_ADSIDO","LT_C_ADSIGG","LT_C_ADEMD","LT_C_ADRI","LT_C_TDWAREA","LT_C_DAMDAN","LT_C_DAMYOD","LT_C_DAMYOJ","LT_C_DAMYUCH","LT_C_RIRSV","LT_P_RIFCT","LT_P_UTISCCTV","LT_C_USFSFFB","LT_L_FRSTCLIMB","LT_P_CLIMBALL","LT_L_TRKROAD","LT_P_TRKROAD","LT_C_WKMBBSN","LT_C_WKMMBSN","LT_C_WKMSBSN","LT_C_WKMSTRM","LT_C_ASITSOILDRA","LT_C_ASITDEEPSOIL","LT_C_ASITSOILDEP","LT_C_ASITSURSTON","LT_L_AISROUTEU","LT_L_AISPATH","LT_C_AISALTC","LT_C_AISRFLC","LT_C_AISACMC","LT_C_AISCTRC","LT_C_AISMOAC","LT_C_AISADZC","LT_C_AISPRHC","LT_C_AISFIRC","LT_C_AISRESC","LT_C_AISDNGC","LT_C_AISTMAC","LT_C_AISCATC","LT_P_AISBLDG40F","LT_L_AISSEARCHL,LT_P_AISSEARCHP","LT_L_AISVFRPATH,LT_P_AISVFRPATH","LT_P_AISVFRPT,LT_P_AISVFRPT_SW,LT_P_AISVFRPT_SN","LT_L_AISCORRID_YS,LT_L_AISCORRID_GJ,LT_P_AISCORRID_YS,LT_P_AISCORRID_GJ","LT_P_AISHCSTRIP"],d=["지적도","도시지역","관리지역","농립지역","자연환경보전지역","경관지구","미관지구","고도지구","방화지구","방재지구","보존지구","시설보호지구","취락지구","개발진흥지구","특정용도제한지구","국토계획구역","도시자연공원구역","개발제한구역","교통링크","교통노드","사업지구경계도","토지이용계획도","아동안전지킴이집","노인복지시설","아동복지시설","기타보호시설","새주소도로","새주소건물","광역시도","시군구","읍면동","리","보행우선구역","단지경계","단지용도지역","단지시설용지","단지유치업종","저수지","수리시설","교통CCTV","소방서관할구역","등산로","등산로시설","둘레길링크","산책로분기점","대권역","중권역","표준권역","하천망","배수등급","심토토성","유효토심","자갈함량","제한고도","항공로","경계구역","공중급유구역","공중전투기동훈련장","관제권","군작전구역","방공식별구역","비행금지구역","비행정보구역","비행제한구역","위험구역","접근관제구역","훈련구역","건물군(40층이상)","수색비행장비행구역","시계비행로","시계비행보고지점","한강회랑","헬기장"],g.append(h),f=0;f<i.length;f+=1)this.autoSelect("vworldWMS",i[f],i[f],d,c,{firstName:f+1+"번째 레이어 선택"});return $("#"+i[0]).change(function(){for(j[0]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[1]).change(function(){for(j[1]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[2]).change(function(){for(j[2]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[3]).change(function(){for(j[3]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")
}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),$("#"+i[4]).change(function(){for(j[4]=this.selectedIndex,$("#"+i[0]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[1]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[2]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[3]+" option").each(function(){$(this).removeAttr("disabled")}),$("#"+i[4]+" option").each(function(){$(this).removeAttr("disabled")}),f=0;f<j.length;f+=1)for(e=0;e<i.length;e+=1)$("#"+i[e]+" option:eq("+j[f]+")").attr("disabled","disabled")}),i},OGDSM.eGovFrameUI.prototype.seoulEnvironment=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c={theme:this.dataTheme,path:"./images/openGDSMobile/"};c=OGDSM.applyOptions(c,b);var d,e,f=['<img src="'+c.path+'input_bt_pm10.png" width=30>','<img src="'+c.path+'input_bt_pm25.png" width=30>','<img src="'+c.path+'input_bt_so2.png" width=30>','<img src="'+c.path+'input_bt_o3.png" width=30>','<img src="'+c.path+'input_bt_no2.png" width=30>','<img src="'+c.path+'input_bt_co.png" width=30>'],g=["PM10","PM25","SO2","O3","NO2","CO"],h=($("#"+a),this.autoRadioBox(a,"visualType",["맵","차트"],["map","chart"],{horizontal:!0})),i=this.dateInput(a),j=this.timeInput(a);for(e=0;e<g.length;e+=3)d=this.autoRadioBox(a,"envTypeRadio"+e,[f[e],f[e+1],f[e+2]],[g[e],g[e+1],g[e+2]],{horizontal:!0,radioName:"envTypeName"});return[h,i,j,d]},OGDSM.eGovFrameUI.prototype.dataPortalEnvironment=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c,d={theme:this.dataTheme,path:"./images/openGDSMobile/"};d=OGDSM.applyOptions(d,b);var e,f,g=['<img src="'+d.path+'input_bt_pm10.png" width=30>','<img src="'+d.path+'input_bt_pm25.png" width=30>','<img src="'+d.path+'input_bt_so2.png" width=30>','<img src="'+d.path+'input_bt_o3.png" width=30>','<img src="'+d.path+'input_bt_no2.png" width=30>','<img src="'+d.path+'input_bt_co.png" width=30>'],h=["pm10Value","pm25Value","so2value","o3Value","no2Value","coValue"],i=["인천","서울","경기","강원","충남","세종","충북","대전","경북","전북","대구","울산","전남","광주","경남","부산","제주"],j=["인천","서울","경기","강원","충남","세종","충북","대전","경북","전북","대구","울산","전남","광주","경남","부산","제주"],k=($("#"+a),this.autoRadioBox(a,"visualType",["맵","차트"],["map","chart"],{horizontal:!0}));for(c=0;c<i.length-2;c+=3)e=this.autoRadioBox(a,"areaType"+c,[i[c],i[c+1],i[c+2]],[j[c],j[c+1],j[c+2]],{horizontal:!0,radioName:"areaTypeName"});for(e=this.autoRadioBox(a,"areaType",[i[i.length-2],i[i.length-1]],[j[j.length-2],j[j.length-1]],{horizontal:!0,radioName:"areaTypeName"}),c=0;c<h.length;c+=3)f=this.autoRadioBox(a,"envType"+c,[g[c],g[c+1],g[c+2]],[h[c],h[c+1],h[c+2]],{horizontal:!0,radioName:"envRadioName"});return[k,e,f]},OGDSM.eGovFrameUI.prototype.dataPortalNuclear=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c={theme:this.dataTheme};c=OGDSM.applyOptions(c,b);var d=($("#"+a),this.autoRadioBox(a,"visualType",["차트"],["chart"],{horizontal:!0})),e=this.autoRadioBox(a,"nuclearPos1",["월성","고리"],["WS","KR"],{horizontal:!0,radioName:"nuclearName"});return e=this.autoRadioBox(a,"nuclearPos2",["한빛","한울"],["YK","UJ"],{horizontal:!0,radioName:"nuclearName"}),[d,e]},OGDSM.eGovFrameUI.prototype.dataPortalGreenGas=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c={theme:this.dataTheme};c=OGDSM.applyOptions(c,b);var d=($("#"+a),this.autoRadioBox(a,"visualType",["차트"],["chart"],{horizontal:!0})),e=this.dateInput(a,"month");return[d,e]},OGDSM.namesapce("mapLayerList"),function(a){"use strict";var b=[],c=[];return a.mapLayerList=function(b,c,d){d="undefined"!=typeof d?d:{};var e={listWidthSize:200,buttonSize:100,btnSW:!0,btnType:"img",btnHTML:'<span style="font-size:15">레이어</span>',bgColor:"rgba(255, 255, 255, 0.0)",listColor:"rgba(255, 255, 255, 0.0)",titleColor:"rgba(255, 255, 255, 1.0)",titleHTML:'<span style="font-weight:bold;">레이어 목록</span>',attrObj:null};e=a.applyOptions(e,d),this.listDiv=c,this.visualizationObj=b,this.attrObj=e.attrObj;var f=this,g=null,h=document.getElementById(c),i=document.createElement("div"),j=document.createElement("div"),k=document.createElement("div"),l=document.createElement("ul"),m="position : absolute; top: 0px;  z-index : 1; background : "+e.bgColor+";",n="cursor:pointer; position : absolute; left :"+e.listWidthSize+"px;width : "+e.buttonSize+"px;",o="float : left; padding : 1px;	background : "+e.listColor+";width : "+e.listWidthSize+"px;",p="width: 100%; margin-bottom:10px; margin-top:10px; text-align:center; background :"+e.titleColor+";",q="list-style:none; padding:0; margin:0;",r=" left: "+-e.listWidthSize+"px; transition: left 0.1s ease;",s=" left: 0px; transition: left 0.1s ease;",t="left:"+e.listWidthSize+"px; transition : background 0.1s ease, left 0.1s ease;",u="left:"+(e.listWidthSize-25)+"px; transition : background 0.1s ease, left 0.1s ease;";g=function(){"hide"===this.value?(this.value="show",h.style.cssText=m+s,i.style.cssText=n+u):(this.value="hide",h.style.cssText=m+r,i.style.cssText=n+t)},i.value="hide",i.id=c+"Button",i.style.cssText=n+t,i.innerHTML="text"===e.btnType?e.btnHTML:'<a href="#" data-role="button" data-icon="grid" data-iconpos="notext" data-corners="false"></a>',i.addEventListener("click",g,!1),i.addEventListener("touchstart",g,!1),j.style.cssText=p,j.innerHTML=e.titleHTML,l.id=c+"Contents",l.style.cssText=q,k.id=c+"Root",k.style.cssText=o,k.appendChild(j),k.appendChild(l),h.style.cssText=m+r,h.appendChild(i),h.appendChild(k),$("#"+c+"Button").trigger("create"),this.ulObj=Sortable.create(document.getElementById(this.listDiv+"Contents"),{animation:150,handle:".drag-handle",onUpdate:function(a){var b,c=f.getLabels(),d=f.getLayersObj(),e=f.getVisualizationObj(),g=c.length-1,h=e.getMap().getLayers(),i=c[g-a.oldIndex],j=d[g-a.oldIndex];if(a.oldIndex>a.newIndex){for(b=g-a.oldIndex;b<g-a.newIndex;b++)c[b]=c[b+1],d[b]=d[b+1];c[g-a.newIndex]=i,d[g-a.newIndex]=j}else{for(b=g-a.oldIndex;b>g-a.newIndex;b--)c[b]=c[b-1],d[b]=d[b-1];c[g-a.newIndex]=i,d[g-a.newIndex]=j}for(b=0;b<d.length;b++)h.pop();for(b=0;b<d.length;b++)h.setAt(b+1,d[b]);f.setLayersObj(d),f.setLabels(c)}})},a.mapLayerList.prototype={constructor:a.mapLayerList,getLayersObj:function(){return b},setLayerObj:function(a){b.push(a)},setLayersObj:function(a){b=a},getLabels:function(){return c},setLabel:function(a){c.push(a)},setLabels:function(a){c=a},getVisualizationObj:function(){return this.visualizationObj},getThis:function(){return this}},a.mapLayerList}(OGDSM),OGDSM.mapLayerList.prototype.addList=function(a,b,c,d){"use strict";function e(a){var b=a.currentTarget.getAttribute("data-label"),c=a.currentTarget.value,d=k.layerCheck(b);d.setOpacity(c/100)}function f(a){var b=a.currentTarget.getAttribute("data-label"),c=i.getLabels(),d=$.inArray(b,c);k.removeMap(b),c.splice(d,1),j.splice(d,1),i.setLayersObj(j),i.setLabels(c),$("#layer"+b).remove(),$("#popup"+b).remove(),null!==l&&l.removeAttribute(b)}function g(a){var b=a.currentTarget.getAttribute("data-label");a.currentTarget.checked?k.setVisible(b,!0):k.setVisible(b,!1)}d="undefined"!=typeof d?d:null;var h=$("#"+this.listDiv+"Contents"),i=this,j=(this.getLabels(),this.getLayersObj()),k=this.visualizationObj,l=this.attrObj;this.setLayerObj(a),this.setLabel(b);var m=b;b.length>10&&(m=m.substr(0,10)+"..."),h.prepend('<li id="layer'+b+'" style="float:left;"><fieldset data-role="controlgroup" data-type="horizontal" style="margin:0px"><div style="width:15%; float:left;"><canvas id="'+b+'canvas" width="100%" height=30px; class="drag-handle" ></canvas></div> <div id="chkRoot'+b+'" style="width:60%; float:left; padding:0px; margin:0px;"><input type="checkbox" name="listCheckBox" data-corners="false" data-mini="true" class="custom" id="visualSW'+i.getLabels().length+'" data-label="'+b+'" checked/><label for="visualSW'+i.getLabels().length+'" style="width:100%">'+m+'</label></div> <div style="width:25%; float:left;"><a id="hrefRoot'+b+'" data-role="button" data-rel="popup" data-theme="b" data-icon="gear"data-corners="false" data-transition="pop" data-iconpos="notext"  data-mini="true" data-label="'+b+'" href="#popup'+b+'" style="width:25%; height:6px;"></a></div></fieldset><div data-role="popup" id="popup'+b+'" style="width:200px"><input type="range" value="100" min="0" max="100" data-highlight="true" class="layer-manager"id="'+b+'slider" data-label="'+b+'"><a data-role="button" data-theme="f" data-mini="true"id="'+b+'delete" data-label="'+b+'">Delete</a></div></li>');var n=document.getElementById(b+"canvas").getContext("2d");"MultiPolygon"===d?(n.fillStyle=c,n.fillRect(5,5,20,20),n.strokeRect(5,5,20,20)):"Point"===d?(n.beginPath(),n.arc(15,15,12,0,2*Math.PI),n.fillStyle=c,n.fill(),n.stroke()):"Line"===d?(n.moveTo(5,5),n.lineTo(20,20),n.strokeStyle=c,n.stroke()):(n.fillStyle="rgb(0, 0, 0)",n.fillRect(5,5,20,20),n.strokeRect(5,5,20,20)),$("#layer"+b).trigger("create"),$("#"+b+"slider").on("change",e),$("#"+b+"delete").on("click",f),$("input[name=listCheckBox]").on("click",g),$("#chkRoot"+b+" > div").css("width","80%")},OGDSM.mapLayerList.prototype.removeList=function(a){"use strict";var b=this.getLabels(),c=this.getLayersObj(),d=$.inArray(a,b);b.splice(d,1),c.splice(d,1),$("#layer"+a).remove(),$("#popup"+a).remove()},OGDSM.indexedDB=function(a,b){"use strict";function c(a,b,c,d){var e=i.open(a,localStorage.openGDSMobileDBVersion);e.onsuccess=function(a){j.db=a.target.result;var e=j.db.transaction(b,"readwrite").objectStore(b),f=e.openCursor();f.onsuccess=function(a){var b=a.target.result,f=!1;if(b){b.key===d?f=!0:b.continue()}f===!1?(e.put(c,d),e.onsuccess=function(){k.success?k.success(c):console.log("Success Insert Data. Please call the second parameter of the callback function"),j.db.close()}):console.log("Fail Insert Data.")}},e.onerror=function(a){console.log(a),console.log("Database error: ",a.target.error)}}function d(a,b,c,d){var e=i.open(a,localStorage.openGDSMobileDBVersion);e.onsuccess=function(a){j.db=a.target.result;var e=j.db.transaction(b,"readwrite").objectStore(b);e.put(c,d),e.onsuccess=function(){console.log("test"),k.success?k.success(c):console.log("Success Update Data. Please call the second parameter of the callback function"),j.db.close()}},e.onerror=function(a){console.log(a),console.log("Database error: ",a.target.error)}}function e(a,b,c,e,f,g){e="undefined"!=typeof e?e:null,f="undefined"!=typeof f?f:null,g="undefined"!=typeof g?g:null;var h=i.open(b,localStorage.openGDSMobileDBVersion);h.onsuccess=function(h){if(j.db=h.target.result,0===j.db.objectStoreNames.length)return console.log("Not Object Store"),-1;var i=j.db.transaction(c,"readonly"),l=[],m=null;i.oncomplete=function(){var h=null,i=null,j=null;if("searchAll"===a)k.success?0!==l.length?k.success(l):(console.error("Not data"),k.fail(l)):console.log("Success search Data. Please call the second parameter of the callback function");else if("search"===a||"edit"===a)if(null!==m){if(null===f)return console.log("OGDSM log : All search result based On Key"),k.success(m),-1;var n;if("[object Array]"===Object.prototype.toString.call(m)){var o=(Object.keys(m[0]),Object.keys(f));i=JSON.parse(JSON.stringify(m)),j=JSON.parse(JSON.stringify(m));for(n in m)if(m.hasOwnProperty(n)&&m[n][o[0]]===f[o[0]]){h=m[n],"edit"===a&&(j[n][o[0]]=g,d(b,c,j,e));break}if(k.success){if(null===h)return console.log("OGDSM Error : Not data"),-1;"edit"===a?k.success(g,i,j):k.success(m,i)}else console.log("Success search Data. Please call the second parameter of the callback function")}else"[object Object]"===Object.prototype.toString.call(m)&&(console.log(m),console.log("object object"))}else console.log("OGDSM Error : Not data key"),k.fail("Not")};var n=i.objectStore(c).openCursor();n.onsuccess=function(a){var b=a.target.result;if(b){var c={};c.key=b.key,c.value=b.value,l.push(c),b.key===e?m=b.value:b.continue()}}},h.onupgradeneeded=function(a){j.db=a.target.result,console.log("new DB in search"),null!==c&&(j.db.objectStoreNames.contains(c)?console.log("Exist Store Name."):j.db.createObjectStore(c))}}function f(a,b,d,e){var f=i.open(a,localStorage.openGDSMobileDBVersion);f.onsuccess=function(f){j.db=f.target.result,null!==d?c(a,b,d,e):k.success?k.success(j.db):console.log("Success Open / Create Indexed. Please call the second parameter of the callback function"),j.db.close()},f.onupgradeneeded=function(a){j.db=a.target.result,console.log("new DB in openDB"),null!==b&&(j.db.objectStoreNames.contains(b)?console.log("Exist Store Name."):j.db.createObjectStore(b))},f.onerror=function(a){console.log("Database error: ",a.target.error)}}function g(a,b,c){var d=i.open(a,localStorage.openGDSMobileDBVersion);d.onsuccess=function(a){j.db=a.target.result;var d=j.db.transaction(b,"readwrite");d.objectStore(b).delete(c)}}function h(a,b){var c=i.open(a,localStorage.openGDSMobileDBVersion);c.onsuccess=function(a){j.db=a.target.result;var c=j.db.transaction(b,"readwrite").objectStore(b);c.clear()}}var i=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,j={};b="undefined"!=typeof b?b:{};var k={type:"new",storeName:a,insertKey:null,insertData:null,searchKey:null,searchData:null,editData:null,deleteKey:null,success:!1,fail:!1};if(k=OGDSM.applyOptions(k,b),"undefined"!=typeof Storage&&(localStorage.openGDSMobileDBVersion=localStorage.openGDSMobileDBVersion=localStorage.openGDSMobileDBVersion?1:1),"new"===k.type)f(a,k.storeName,k.insertData,k.insertKey);else if("insert"===k.type)c(a,k.storeName,k.insertData,k.insertKey);else if("forceInsert"===k.type)d(a,k.storeName,k.insertData,k.insertKey);else{if("remove"===k.type)return g(a,k.storeName,k.deleteKey),-1;if("removeAll"===k.type)return h(a,k.storeName),-1;"search"===k.type?e(k.type,a,k.storeName,k.searchKey,k.searchData):"searchAll"===k.type?e(k.type,a,k.storeName):"edit"===k.type?e(k.type,a,k.storeName,k.searchKey,k.searchData,k.editData):"deleteDB"===k.type&&i.deleteDatabase(a)}return this},OGDSM.namesapce("attributeTable"),function(a){"use strict";return a.attributeTable=function(a,b,c,d){c="undefined"!=typeof c?c:null,this.rootDiv=a,this.visualObj=c,this.addr=b,this.editMode=!1,this.indexedDB_SW=d,this.attrTableObjs=[],this.curTab=null,this.wsObj=null,this.attrSelected=!1,this.storeEditTable=[];var e=document.getElementById(a),f=document.createElement("ul"),g=document.createElement("div"),h="width: 100%; height: 100%; background: rgba(255, 255, 255, 0.0); margin: 0px;",i="list-style: none; position: relative; margin: 0px; z-index: 2; top: 1px; display: table; border-left: 1px solid #f5ab36;";f.id=a+"Tab",f.style.cssText=i,g.id=a+"Contents",g.style.cssText=h,e.appendChild(f),e.appendChild(g)},a.attributeTable.prototype={constructor:a.attributeTable,getEditMode:function(){return this.editMode},getSelectObj:function(){return this.attrSelected},setSelectObj:function(a){this.attrSelected=a},setCurTab:function(a){this.curTab=a},getCurTab:function(){return this.curTab},getWsObj:function(){return this.wsObj},getStoreEditTable:function(){return this.storeEditTable}},a.attributeTable}(OGDSM),OGDSM.attributeTable.prototype.addAttribute=function(a){"use strict";function b(b){$("#"+j+"Tab a").css("border-bottom",""),$("#"+j+"Tab a").css("background",r),$(b.currentTarget).css("border-bottom",u),$(b.currentTarget).css("background",s),$(".attrTable").hide(),$("#attrContent"+a).css("display","block"),$(".attrTable tr.selected").removeClass("selected"),h.setCurTab(a)}function c(b,c,d,e){var f=d.find("tr:last"),g={};$.each(b,function(b,d){0===c&&e.append('<th data-value="'+b+'">'+b+"</th>"),f.append('<td data-key="'+b+'" data-label="'+a+'" class="editSW '+a+b+d+'">'+d+"</td>"),g[b]=d}),f.attr("data-summary",JSON.stringify(g))}function d(a){$("#attrTable"+a+" tbody").on("click","td",function(){var b=0,c=0,d=$(this).parent(),e=$(d).children(),f={},g=[];for(b=0;b<e.length;b++)g.push($(e[b]).attr("data-key")),f[$(e[b]).attr("data-key")]=$(e[b]).html();if(null!==l){var i=l.layerCheck(a).getSource().getFeatures();for(l.getFeatureOverlay().getFeatures().clear(),b=0;b<i.length;b++){var j=i[b],k=j.getProperties();for(c=0;c<g.length;c++)if("undefined"!=typeof k[g[c]]){if(f[g[c]]!==k[g[c]])break;c===g.length-1&&(l.getFeatureOverlay().addFeature(j),h.selectAttribute(a,$(this).attr("data-key"),$(this).html(),h))}}}}),$("#attrTable"+a).on("page.dt",function(){var a=h.getSelectObj();setTimeout(function(){if(h.editAttributeMode(h.getEditMode(),h.getCurTab(),h.getWsObj()),a!==!1&&h.selectAttribute(a.tableName,a.key,a.value,h),0!==h.getStoreEditTable().length){var b=0,c=h.getStoreEditTable();for(console.log(c),b=0;b<c.length;b++){var d=c[b],e=h.editValueAttribute(d.tableName,d.header,d.value,d.editValue);-1!==e&&c.splice(b,1)}}},200)})}function e(a,b){OGDSM.indexedDB("webMappingDB",{insertKey:a,insertData:b,success:function(){console.log("OpenGDS Mobile : "+a+", indexedDB save success")},fail:function(){console.log("OpenGDS Mobile : "+a+", indexedDB save fail")}})}function f(e){function f(){h.setCurTab(a),n.prepend('<li id="attrTab'+a+'" style="float:left;"><a href="#" style="'+q+'">'+a+"</a></li>"),$("#"+j+"Tab a").css("background",r),$("#attrTab"+a+" a").css("border-bottom",u),$("#attrTab"+a+" a").css("background",s),$("#attrTab"+a+" a").css("color",t);$("#"+j+"Contents").height();o.prepend('<div id="attrContent'+a+'" class="attrTable"><table id="attrTable'+a+'" class="display compact" cellspacing="0" width="100%"><thead style="width:100%;"><tr></tr></thead><tbody style="text-align:center"></tbody></table></div>'),$(".attrTable").hide(),$("#attrContent"+a).css("display","block"),$("#attrTab"+a+" a").on("click",b)}f();var g=0,i=$("#attrContent"+a),k=i.find("thead").find("tr"),l=i.find("tbody");for(g=0;g<e.length;g++)l.append("<tr>"),c(e[g],g,l,k),l.append("</tr>");var v=($("thead").height()+7,{});p=$("#attrTable"+a).DataTable({bFilter:!1,bLengthChange:10,bPaginate:!0,dom:'rt<"bottom"ip><"clear">'}),v.attrName=a,v.attrObj=p,m.push(v),d(a)}function g(b){var c={};c.tableName=a,$.ajax({type:"POST",url:b,data:JSON.stringify(c),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(b){var c=b.data;return null===c?(console.log("Not attribute information"),-1):(f(c),void(k===!0&&e(a,c)))},error:function(a){console.log(a)}})}var h=this,i=this.addr,j=this.rootDiv,k=this.indexedDB_SW,l=this.visualObj,m=(this.attrSelected,this.attrTableObjs),n=(this.curTab,this.wsObj,$("#"+j+"Tab")),o=$("#"+j+"Contents"),p=null,q="display:block; padding:6px 15px; text-decoration:none;border-right:1px solid #000; border-top:1px solid #000; margin:0;",r="#fff",s="#ffd89b",t="#344385",u="1px solid #fff";k===!0?OGDSM.indexedDB("webMappingDB",{type:"search",storeName:"webMappingDB",searchKey:a,success:function(a){console.log("OpenGDS Mobile : indexedDB 데이터 O"),f(a)},fail:function(){console.log("OpenGDS Mobile : indexedDB 데이터 X, 서버 요청"),g(i)}}):(console.log("OpenGDS Mobile : indexedDB 설정 X, 서버 요청"),g(i))},OGDSM.attributeTable.prototype.removeAttribute=function(a){"use strict";$("#attrTab"+a).remove(),$("#attrContent"+a).remove()},OGDSM.attributeTable.prototype.editAttributeMode=function(a,b,c){"use strict";function d(a){function d(d){console.log(e),e.tableName=b,e.column=Object.keys(i)[0],e.srcData=h,e.dstData=a,d.push(e),null!==c?(console.log("실시간 편집중입니다"),c.send(JSON.stringify(d)),OGDSM.indexedDB("webMappingDB",{type:"remove",deleteKey:"editedData"})):(console.log("실시간 편집중이 아니므로 디비에 저장합니다"),g.editValueAttribute(e.tableName,e.column,e.srcData,e.dstData),OGDSM.indexedDB("webMappingDB",{type:"forceInsert",insertKey:"editedData",insertData:d}))}var e={};OGDSM.indexedDB("webMappingDB",{type:"search",searchKey:"editedData",success:function(a){d(a)},fail:function(){d([])}})}c=this.wsObj="undefined"!=typeof c?c:null;var e="undefined"!=typeof b?"#attrTable"+b+" ":"",f=$(e+".editSW"),g=this,h=null,i={},j="editValueTextDIV",k="editValueTextId";if(this.editMode=a,0===$("#"+j).length){var l=$("body"),m='<div data-role="popup" id="'+j+'"><input type="text" value="'+h+'" id="'+k+'"></div>';l.append(m),l.trigger("create")}if(a===!0){this.editMode=!0;{this.attrTableObjs}f.off("click"),f.on("click",function(){h=$(this).html();var a=$(this).attr("data-key"),b=$(this).attr("data-label");$("#"+k).val(h),$("#"+j).popup("open"),$("#"+j).off(),$("#"+j).on({popupafterclose:function(){i={};var c=$("#"+k);return h===c.val()?-1:(i[a]=h,void(g.indexedDB_SW===!0&&(console.log(b+" "+i+" "+c.val()),OGDSM.indexedDB("webMappingDB",{type:"edit",searchKey:b,searchData:i,editData:c.val(),success:d}))))}})})}else console.log("click event 해지"),this.editMode=!1,$("#"+j).off(),$("#"+j).remove(),$("#"+k).off("change"),$("#"+k).off("focus")},OGDSM.attributeTable.prototype.searchAttribute=function(a,b,c){"use strict";var d=a+b+c,e=$("."+d).parent();return e},OGDSM.attributeTable.prototype.editValueAttribute=function(a,b,c,d){"use strict";d="undefined"!=typeof d?d:null;var e=a+b+c,f=a+b+d,g=$("."+e);if(0===g.length){var h=this.storeEditTable,i=0;for(i=0;i<h.length;i++){var j=h[i];if(j.value===c&&j.editValue===d)return console.log("OpenGDS Mobile : ext"),-1}var k={};k.tableName=a,k.header=b,k.value=c,k.editValue=d,this.storeEditTable.push(k)}else g.html(d),g.removeClass(e),g.addClass(f);if(this.indexedDB_SW===!0){console.log("update indexedDB : "+a+" "+c+" "+d);var l={};l[b]=c,console.log(l),OGDSM.indexedDB("webMappingDB",{type:"edit",searchKey:a,searchData:l,editData:d,success:function(){console.log("indexedDB edit")},fail:function(){console.log("fail")}})}},OGDSM.attributeTable.prototype.selectAttribute=function(a,b,c,d){"use strict";d="undefined"!=typeof d?d:this;var e=a+b+c,f=$("."+e).parent(),g={};g.tableName=a,g.key=b,g.value=c,d.unSelectAttribute(d),f.addClass("selected"),d.setSelectObj(g)},OGDSM.attributeTable.prototype.unSelectAttribute=function(a){"use strict";if(a="undefined"!=typeof a?a:this,a.getSelectObj()!==!1){var b=a.getSelectObj(),c=b.tableName+b.key+b.value,d=$("."+c).parent();d.removeClass("selected"),a.setSelectObj(!1)}},OGDSM.namesapce("chartVisualization"),function(a){"use strict";return a.chartVisualization=function(b,c){function d(a){return a%1===0}if(c="undefined"!=typeof c?c:{},this.defaults={rootKey:null,labelKey:null,valueKey:null,max:null,min:null},this.defaults=a.applyOptions(this.defaults,c),"undefined"!=typeof b){if("undefined"==typeof c.rootKey||"undefined"==typeof c.labelKey||"undefined"==typeof c.valueKey)return console.error("Please input option values : rootKey, label, value"),null;this.jsonData=b,this.data=b[c.rootKey],this.defaults=a.applyOptions(this.defaults,c);var e=null;this.defaults.max=this.defaults.min=this.data[0][c.valueKey];for(e in this.data)this.data.hasOwnProperty(e)&&(this.defaults.max=Math.max(this.data[e][c.valueKey],this.defaults.max),this.defaults.min=Math.min(this.data[e][c.valueKey],this.defaults.min),d(Number(this.data[e][c.valueKey]))||(this.data[e][c.valueKey]=Number(this.data[e][c.valueKey]).toFixed(3)));this.defaults.max="undefined"!=typeof c.max?c.max:this.defaults.max,this.defaults.min="undefined"!=typeof c.min?c.min:this.defaults.min}else console.log("kMap function Mode")},a.chartVisualization.prototype={constructor:a.chartVisualization,getMap:function(){return null},max:function(){}},a.chartVisualization}(OGDSM),OGDSM.chartVisualization.prototype.vBarChart=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c=this.data,d=this.defaults,e={range:null,color:["#4AAEEA"],top:20,right:25,bottom:70,left:45,tick:10};e=OGDSM.applyOptions(e,b);var f=$("#"+a),g=f.width()+e.left+e.right,h=f.height()+e.top+e.bottom,i=f.width()-e.left-e.right,j=f.height()-e.top-e.bottom;$("#"+a).empty();var k=d3.scale.ordinal().rangeRoundBands([0,i],.05),l=d3.scale.linear().range([j,0]),m=d3.svg.axis().scale(k).orient("bottom"),n=d3.svg.axis().scale(l).orient("left").ticks(e.tick),o=d3.select("#"+a).append("svg").attr("id",a+"Bar").attr("width",g).attr("height",h).append("g").attr("transform","translate("+e.left+", "+e.top+")");k.domain(c.map(function(a){return a[d.labelKey]})),l.domain([d.min,d.max]),o.append("g").attr("class","y axis").call(n).attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").append("text").attr("transform","rotate(-90)").attr("y",7).attr("dy",".71em").style("text-anchor","end").style("font-size","0.7em").text(d.valueKey),o.append("g").attr("class","x axis").attr("transform","translate(0, "+j+")").call(m).attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").selectAll("text").style("text-anchor","end").style("font-size","0.7em").attr("dx","-.8em").attr("dy",".15em").attr("transform",function(){return"rotate(-65)"}),o.selectAll("bar").data(c).enter().append("rect").attr("fill",function(a){if($.isArray(e.range)!==!0)return e.color;var b=0;for(b=0;b<e.range.length;b+=1)if(a[d.valueKey]<=e.range[b])return e.color[b]}).attr("x",function(a){return k(a[d.labelKey])}).attr("width",k.rangeBand()).attr("y",function(a){return isNaN(l(a[d.valueKey]))?0:l(a[d.valueKey])}).attr("height",function(a){return isNaN(l(a[d.valueKey]))?0:j-l(a[d.valueKey])}),o.selectAll("bar").data(c).enter().append("text").attr("x",function(a){return k(a[d.labelKey])+k.rangeBand()/2}).attr("y",function(a){return l(a[d.valueKey])}).attr("dx","-5").attr("dy",".75em").style("font-size","0.75em").attr("text-anchor","start").text(function(a){return a[d.valueKey]})},OGDSM.chartVisualization.prototype.hBarChart=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c=this.data,d=this.defaults,e={range:null,color:["#4AAEEA"],top:20,right:60,bottom:20,left:80,tick:10};e=OGDSM.applyOptions(e,b);var f=$("#"+a),g=f.width()+e.left+e.right,h=f.height()+e.top+e.bottom,i=f.width()-e.left-e.right,j=f.height()-e.top-e.bottom;$("#"+a).empty();var k=d3.scale.ordinal().rangeRoundBands([0,j],.02),l=d3.scale.linear().range([0,i]),m=d3.select("#"+a).append("svg").attr("id",a+"Bar").attr("width",g).attr("height",h).append("g").attr("transform","translate("+e.left+", "+e.top+")"),n=d3.svg.axis().scale(k).orient("left"),o=d3.svg.axis().scale(l).orient("top");k.domain(c.map(function(a){return a[d.labelKey]})),l.domain([d.min,d.max]),m.append("g").attr("class","y axis").call(n).attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").selectAll("text").style("text-anchor","end").style("font-size","0.75em").attr("dx","-.8em").attr("dy",".15em"),m.append("g").attr("class","x axis").call(o).attr("fill","none").attr("stroke","#000").style("font-size","0.75em").attr("shape-rendering","crispEdges").append("text").attr("x",i).attr("dy","1.2em").style("text-anchor","end").style("font-size","0.75em").text(d.valueKey),m.selectAll("bar").data(c).enter().append("rect").attr("x",function(){return.5}).attr("y",function(a){return k(a[d.labelKey])}).attr("height",k.rangeBand()-.5).attr("width",function(a){return l(a[d.valueKey])}).attr("fill",function(a){if($.isArray(e.range)!==!0)return e.color;var b=0;for(b=0;b<e.range.length;b+=1)if(a[d.valueKey]<=e.range[b])return e.color[b]}),m.selectAll("bar").data(c).enter().append("text").attr("x",function(a){return l(a[d.valueKey])}).attr("y",function(a){return k(a[d.labelKey])}).attr("dy",".75em").style("font-size","0.75em").attr("text-anchor","start").text(function(a){return a[d.valueKey]})},OGDSM.chartVisualization.prototype.lineChart=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c=this.data,d=this.defaults,e={range:null,stroke:["#4AAEEA"],width:2,circleSize:3,circleColor:["#AAAAAA"],top:20,right:25,bottom:100,left:45};e=OGDSM.applyOptions(e,b);var f=$("#"+a),g=f.width()+e.left+e.right,h=f.height()+e.top+e.bottom,i=f.width()-e.left-e.right,j=f.height()-e.top-e.bottom;$("#"+a).empty();var k=d3.scale.ordinal().rangeRoundBands([0,i],.05),l=d3.scale.linear().range([j,0]),m=d3.select("#"+a).append("svg").attr("id",a+"line").attr("width",g).attr("height",h).append("g").attr("transform","translate("+e.left+", "+e.top+")"),n=d3.svg.axis().scale(k).orient("bottom"),o=d3.svg.axis().scale(l).orient("left");k.domain(c.map(function(a){return a[d.labelKey]})),l.domain([d.min,d.max]);var p=d3.svg.line().x(function(a){return k(a[d.labelKey])+k.rangeBand()/2}).y(function(a){return l(a[d.valueKey])});m.append("path").attr("d",p(c)).attr("stroke",e.stroke).attr("stroke-width",e.stroke).attr("fill","none"),m.append("g").attr("class","x axis").call(n).attr("transform","translate(0, "+j+")").attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").selectAll("text").style("text-anchor","end").style("font-size","0.7em").attr("dx","-.8em").attr("dy",".15em").attr("transform",function(){return"rotate(-65)"}),m.append("g").attr("class","y axis").call(o).attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").style("text-anchor","end").style("font-size","0.7em").append("text").attr("transform","rotate(-90)").attr("y",7).attr("dy",".71em").style("text-anchor","end").style("font-size","0.7em").text(d.valueKey);var q=m.selectAll("circle").data(c).enter().append("g");q.append("circle").attr("r",e.circleSize).attr("fill",e.circleColor).attr("cy",function(a){return l(a[d.valueKey])}).attr("cx",function(a){return k(a[d.labelKey])+k.rangeBand()/2}),q.append("text").attr("dy","-.5em").style("font-size","0.55em").style("text-anchor","start").text(function(a){return a[d.valueKey]}).attr("x",function(a){return k(a[d.labelKey])}).attr("y",function(a){return l(a[d.valueKey])})},OGDSM.chartVisualization.prototype.areaChart=function(a,b){"use strict";b="undefined"!=typeof b?b:{};var c=this.data,d=this.defaults,e={fill:["#4AAEEA"],circleSize:3,circleColor:["#AAAAAA"],top:20,right:0,bottom:100,left:45};e=OGDSM.applyOptions(e,b);var f=$("#"+a),g=f.width()+e.left+e.right,h=f.height()+e.top+e.bottom,i=f.width()-e.left-e.right,j=f.height()-e.top-e.bottom;$("#"+a).empty();var k=d3.scale.ordinal().rangeRoundBands([0,i],.1),l=d3.scale.linear().range([j,0]),m=d3.select("#"+a).append("svg").attr("id",a+"Bar").attr("width",g).attr("height",h).append("g").attr("transform","translate("+e.left+", "+e.top+")"),n=d3.svg.axis().scale(k).orient("bottom"),o=d3.svg.axis().scale(l).orient("left");k.domain(c.map(function(a){return a[d.labelKey]})),l.domain([d.min,d.max]);var p=d3.svg.area().x(function(a){return k(a[d.labelKey])+k.rangeBand()/2}).y0(j).y1(function(a){return l(a[d.valueKey])});m.append("path").attr("d",p(c)).attr("class","area").attr("fill",e.fill);var q=m.selectAll("circle").data(c).enter().append("g");q.append("circle").attr("r",e.circleSize).attr("fill",e.circleColor).attr("cy",function(a){return l(a[d.valueKey])}).attr("cx",function(a){return k(a[d.labelKey])+k.rangeBand()/2}),q.append("text").attr("dy","-.5em").style("font-size","0.55em").style("text-anchor","start").text(function(a){return a[d.valueKey]}).attr("x",function(a){return k(a[d.labelKey])+k.rangeBand()/2}).attr("y",function(a){return l(a[d.valueKey])}),m.append("g").attr("class","x axis").call(n).attr("transform","translate(0, "+j+")").attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").selectAll("text").style("text-anchor","end").style("font-size","0.7em").attr("dx","-.8em").attr("dy",".15em").attr("transform",function(){return"rotate(-65)"}),m.append("g").attr("class","y axis").call(o).attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").style("text-anchor","end").style("font-size","0.7em").append("text").attr("transform","rotate(-90)").attr("y",7).attr("dy",".71em").style("text-anchor","end").style("font-size","0.7em").text(d.valueKey)},OGDSM.chartVisualization.prototype.kMap=function(a,b,c,d){"use strict";d="undefined"!=typeof d?d:{};var e=(this.data,this.defaults,{center_lat:34,center_lon:131,map_scale:3500,top:0,right:0,bottom:0,left:0});e=OGDSM.applyOptions(e,d);var f=$("#"+a),g=f.width()+e.left+e.right,h=f.height()+e.top+e.bottom,i=f.width()-e.left-e.right,j=f.height()-e.top-e.bottom,k=[{geoName:"SIDO",objName:"All_TL_SCCO_CTPRVN_4326",propEnName:"CTP_ENG_NM"},{geoName:"GU",objName:"All_TL_SCCO_SIG_4326",propEnName:"SIG_ENG_NM"},{geoName:"DONG",objName:"All_TL_SCCO_EMD_4326",propEnName:"EMD_ENG_NM"}],l={};
l.jsonName=c,f.empty();var m=d3.select("#"+a).append("svg").attr("width",g).attr("height",h),n=d3.geo.mercator().center([e.center_lon,e.center_lat]).scale(e.map_scale).rotate([2,2.5]).translate([i/2,j/2]),o=d3.geo.path().projection(n),p=null,q=null;return $.each(k,function(a,b){b.geoName===c&&(p=b.objName,q=b.propEnName)}),null===p?(console.log("Not support Map"),-1):void $.ajax({type:"POST",url:b,data:JSON.stringify(l),contentType:"application/json;charset=UTF-8",dataType:"json",success:function(a){var b=JSON.parse(a.data),c=b.objects;m.selectAll("path").data(topojson.feature(b,c[p]).features).enter().append("path").attr("data-prop",function(a){return JSON.stringify(a.properties)}).style("fill",function(){return"#"+Math.random().toString(16).slice(2,8)}).style("fill-opacity",.5).attr("d",o)},error:function(a){console.log(a),$("#result").text(a)}})},OGDSM.namesapce("webSocket"),function(a){"use strict";return a.webSocket=function(b,c,d){if("undefined"==typeof window.WebSocket)return console.error("webSocket is not supported by your browser!"),-1;var e={data:null,subject:null,callback:function(){console.log("Plase create callback function")}};e=a.applyOptions(e,d);var f=new WebSocket(b);this.ws=f,f.onopen=function(){var a={};a.userId=c,a.subject=e.subject,console.log(a),f.send(JSON.stringify(a))},f.onmessage=e.callback},a.webSocket.prototype={constructor:a.webSocket,getEditMode:function(){return this.editMode}},a.webSocket}(OGDSM),OGDSM.webSocket.prototype.send=function(a){"use strict";var b=this.ws;b.send(a)},OGDSM.webSocket.prototype.webSocketClose=function(){"use strict";var a=this.ws;a.close()};
