<!DOCTYPE html>
<html lang="en" class="yui-overrride">
<head>
    <meta charset="utf-8">
    <title>../js/openGDSMobile/OGDSM_chartVisualization.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1 class="blue-main-title"></h1>
        </div>
        <div class="yui3-u-1-4 version project-version">
            API Docs for:
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>

                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>

                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/OGDSM.html">OGDSM</a></li>
                                <li><a href="../classes/OGDSM.attributeTable.html">OGDSM.attributeTable</a></li>
                                <li><a href="../classes/OGDSM.chartVisualization.html">OGDSM.chartVisualization</a></li>
                                <li><a href="../classes/OGDSM.eGovFrameUI.html">OGDSM.eGovFrameUI</a></li>
                                <li><a href="../classes/OGDSM.externalConnection.html">OGDSM.externalConnection</a></li>
                                <li><a href="../classes/OGDSM.mapLayerList.html">OGDSM.mapLayerList</a></li>
                                <li><a href="../classes/OGDSM.visualization.html">OGDSM.visualization</a></li>
                            </ul>

                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/OGDSM.applyOptions.html">OGDSM.applyOptions</a></li>
                                <li><a href="../modules/OGDSM.indexedDB.html">OGDSM.indexedDB</a></li>
                                <li><a href="../modules/OGDSM.jsontoArray.html">OGDSM.jsontoArray</a></li>
                                <li><a href="../modules/OGDSM.namespace.html">OGDSM.namespace</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>

                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>

                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>

                </div>

            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../js/openGDSMobile/OGDSM_chartVisualization.js</h1>

                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /*jslint devel: true, vars : true, plusplus : true */
                        /*global $, jQuery, ol, OGDSM, d3, topojson*/

                        OGDSM.namesapce(&#x27;chartVisualization&#x27;);
                        (function (OGDSM) {
                            &quot;use strict&quot;;
                            /**
                            * D3.js 기반 시각화 객체
                            * @class OGDSM.chartVisualization
                            * @constructor
                            * @param {Array} jsonData - JSON 기반 데이터
                            * @param {JSON Object} options - 옵션 JSON 객체 키 값&lt;br&gt;
                              {rootKey : null, labelKey : null, valueKey : null, &lt;br&gt;
                               max:jsonData min value (based on valueKey), min:jsonData max value (based on valueKey)}&lt;br&gt;
                            */
                            OGDSM.chartVisualization = function (jsonData, options) {
                                options = (typeof (options) !== &#x27;undefined&#x27;) ? options : {};
                                this.defaults = {
                                    rootKey : null,
                                    labelKey : null,
                                    valueKey : null,
                                    max : null,
                                    min : null
                                };
                                this.defaults = OGDSM.applyOptions(this.defaults, options);
                                if (typeof (jsonData) !== &#x27;undefined&#x27;) {
                                    if (typeof (options.rootKey) === &#x27;undefined&#x27; ||
                                            typeof (options.labelKey) === &#x27;undefined&#x27; ||
                                            typeof (options.valueKey) === &#x27;undefined&#x27;) {
                                        console.error(&#x27;Please input option values : rootKey, label, value&#x27;);
                                        return null;
                                    }
                        	        this.jsonData = jsonData;
                        	        this.data = jsonData[options.rootKey];
                        	        this.defaults = OGDSM.applyOptions(this.defaults, options);
                        	        var d = null;
                        	        this.defaults.max = this.defaults.min = this.data[0][options.valueKey];
                        	        for (d in this.data) {
                        	            if (this.data.hasOwnProperty(d)) {
                        	                this.defaults.max = Math.max(this.data[d][options.valueKey], this.defaults.max);
                        	                this.defaults.min = Math.min(this.data[d][options.valueKey], this.defaults.max);
                        	            }
                        	        }
                        	        this.defaults.max = (typeof (options.max) !== &#x27;undefined&#x27;) ? options.max : this.defaults.max;
                        	        this.defaults.min = (typeof (options.min) !== &#x27;undefined&#x27;) ? options.min : this.defaults.min;

                                }
                            };
                            OGDSM.chartVisualization.prototype = {
                                constructor : OGDSM.chartVisualization,
                                /**
                                 * 지도 객체 받기
                                 * @method getMap
                                 * @return {ol.Map} 오픈레이어3 객체
                                 */
                                getMap : function () {
                                    return null;
                                },
                                max : function () {

                                }
                            };
                            return OGDSM.chartVisualization;
                        }(OGDSM));


                        /**
                         * 수직 막대 차트 시각화
                         * @method vBarChart
                         * @param {String} divId - 막대 차트 시각화할 DIV 아이디 이름
                         * @param {JSON Object} options - 옵션 JSON 객체 키 값&lt;br&gt;
                              {range : [], color : [&#x27;#4AAEEA&#x27;]}&lt;br&gt;
                         */
                        OGDSM.chartVisualization.prototype.vBarChart = function (rootDiv, subOptions) {
                            &#x27;use strict&#x27;;
                            subOptions = (typeof (subOptions) !== &#x27;undefined&#x27;) ? subOptions : {};
                            var data = this.data,
                                options = this.defaults,
                                chartOptions = {
                                    range : null,
                                    color : [&#x27;#4AAEEA&#x27;]
                                };
                            chartOptions = OGDSM.applyOptions(chartOptions, subOptions);
                            var rootDivObj = $(&#x27;#&#x27; + rootDiv),
                                margin = {top : 20, right : 25, bottom : 130, left : 45},
                                barWidth = rootDivObj.width() - margin.left - margin.right,
                                barHeight = rootDivObj.height() - margin.top - margin.bottom;
                            $(&#x27;#&#x27; + rootDiv).empty();
                            var labels = d3.scale.ordinal().rangeRoundBands([0, barWidth], 0.1);
                            var values = d3.scale.linear().range([barHeight, 0]);
                            var chartSVG = d3.select(&#x27;#&#x27; + rootDiv).append(&#x27;svg&#x27;).attr(&#x27;id&#x27;, rootDiv + &#x27;Bar&#x27;)
                                .attr(&#x27;width&#x27;, barWidth + margin.left + margin.right)
                                .attr(&#x27;height&#x27;, barHeight + margin.top + margin.bottom);

                            var labelAxis = d3.svg.axis().scale(labels).orient(&#x27;bottom&#x27;);
                            var valueAxis = d3.svg.axis().scale(values).orient(&#x27;left&#x27;);
                            labels.domain(data.map(function (d) {
                                return d[options.labelKey];
                            }));
                            values.domain([options.min, options.max]);

                            var bar = chartSVG.selectAll(&#x27;g&#x27;).data(data).enter()
                                .append(&#x27;g&#x27;)
                                .attr(&#x27;transform&#x27;, function (d, i) {
                                    return &#x27;translate(&#x27; + labels(d[options.labelKey]) + &#x27;, &#x27; + margin.top + &#x27;)&#x27;;
                                });

                            var barRect = bar.append(&#x27;rect&#x27;)
                                .attr(&#x27;y&#x27;, function (d) {
                                    return values(d[options.valueKey]);
                                })
                                .attr(&#x27;x&#x27;, function (d, i) {
                                    return labels.rangeBand() + (margin.left / 3); //+(margin.left/4)
                              //      return (labels(d[options.labelKey]) / data.length) + margin.left;
                                })
                                .attr(&#x27;height&#x27;, function (d) {
                                    return barHeight - values(d[options.valueKey]);
                                })
                                .attr(&#x27;width&#x27;, labels.rangeBand())
                                .attr(&#x27;fill&#x27;, function (d) {
                                    if ($.isArray(chartOptions.range) === true) {
                                        var z = 0;
                                        for (z = 0; z &lt; chartOptions.range.length; z += 1) {
                                            if (d[options.valueKey] &lt;= chartOptions.range.range[z]) {
                                                return chartOptions.color[z];
                                            }
                                        }
                                    } else {
                                        return chartOptions.color;
                                    }
                                });/*
                            barRect.transition()
                                .duration(2000)
                                .attr(&#x27;height&#x27;, function (d) {
                                    return barHeight - values(d[options.valueKey]);
                                });*/

                            bar.append(&#x27;text&#x27;)
                                .attr(&#x27;x&#x27;, labels.rangeBand() + margin.left)
                                .attr(&#x27;y&#x27;, function (d) {
                                    return values(d[options.valueKey]) - 10;
                                })
                                .attr(&#x27;dy&#x27;, &#x27;.75em&#x27;)
                                .attr(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .text(function (d) {
                                    return d[options.valueKey];
                                });

                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;x axis&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + (barHeight + margin.top) + &#x27;)&#x27;)
                                .call(labelAxis)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                .selectAll(&#x27;text&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .attr(&#x27;dx&#x27;, &#x27;-.8em&#x27;)
                                .attr(&#x27;dy&#x27;, &#x27;.15em&#x27;)
                                .attr(&#x27;transform&#x27;, function (d) {
                                    return &#x27;rotate(-65)&#x27;;
                                });

                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;y axis&#x27;)
                                    .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                    .call(valueAxis)
                                    .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                    .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                    .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                    .append(&#x27;text&#x27;)
                                    .attr(&#x27;transform&#x27;, &#x27;rotate(-90)&#x27;)
                                    .attr(&#x27;y&#x27;, 5)
                                    .attr(&#x27;dy&#x27;, &#x27;.71em&#x27;)
                                    .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                    .text(options.valueKey);
                        };



                        /**
                         * 수평 막대 차트 시각화
                         * @method hBarChart
                         * @param {String} divId - 막대 차트 시각화할 DIV 아이디 이름
                         * @param {JSON Object} options - 옵션 JSON 객체 키 값&lt;br&gt;
                              {range : [], color : [&#x27;#4AAEEA&#x27;]}&lt;br&gt;
                         */
                        OGDSM.chartVisualization.prototype.hBarChart = function (rootDiv, subOptions) {
                            &#x27;use strict&#x27;;
                            subOptions = (typeof (subOptions) !== &#x27;undefined&#x27;) ? subOptions : {};
                            var data = this.data,
                                options = this.defaults,
                                chartOptions = {
                                    range : null,
                                    color : [&#x27;#4AAEEA&#x27;]
                                };
                            chartOptions = OGDSM.applyOptions(chartOptions, subOptions);
                            var rootDivObj = $(&#x27;#&#x27; + rootDiv),
                                margin = {top : 0, right : 60, bottom : 20, left : 80},
                                barWidth = rootDivObj.width() - margin.left - margin.right,
                                barHeight = rootDivObj.height() - margin.top - margin.bottom;
                            $(&#x27;#&#x27; + rootDiv).empty();
                            var labels = d3.scale.ordinal().rangeRoundBands([0, barHeight], 0.1);
                            var values = d3.scale.linear().range([barWidth, 0]);
                            var chartSVG = d3.select(&#x27;#&#x27; + rootDiv).append(&#x27;svg&#x27;).attr(&#x27;id&#x27;, rootDiv + &#x27;Bar&#x27;)
                                .attr(&#x27;width&#x27;, barWidth + margin.left + margin.right)
                                .attr(&#x27;height&#x27;, barHeight + margin.top + margin.bottom);

                            var labelAxis = d3.svg.axis().scale(labels).orient(&#x27;left&#x27;);
                            var valueAxis = d3.svg.axis().scale(values).orient(&#x27;bottom&#x27;);
                            labels.domain(data.map(function (d) {
                                return d[options.labelKey];
                            }));
                            values.domain([options.min, options.max]);
                            console.log(options.min + &#x27; &#x27; + options.max);
                            var bar = chartSVG.selectAll(&#x27;g&#x27;).data(data).enter()
                                .append(&#x27;g&#x27;)
                                .attr(&#x27;transform&#x27;, function (d, i) {
                                    return &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + labels(d[options.labelKey]) + &#x27;)&#x27;;
                                });
                            bar.append(&#x27;rect&#x27;)
                                .attr(&#x27;y&#x27;, function (d) {
                                    return labels.rangeBand() + (margin.top / 3); //+(margin.left/4)
                                })
                                .attr(&#x27;x&#x27;, function (d, i) {
                                    return margin.left;
                                })
                                .attr(&#x27;height&#x27;, labels.rangeBand())
                                .attr(&#x27;width&#x27;, function (d) {
                                    //return barWidth - values(d[options.valueKey]);
                                    return barWidth - values(d[options.valueKey]);
                                })
                                .attr(&#x27;fill&#x27;, function (d) {
                                    if ($.isArray(chartOptions.range) === true) {
                                        var z = 0;
                                        for (z = 0; z &lt; chartOptions.range.length; z += 1) {
                                            if (d[options.valueKey] &lt;= chartOptions.range.range[z]) {
                                                return chartOptions.color[z];
                                            }
                                        }
                                    } else {
                                        return chartOptions.color;
                                    }
                                });
                            bar.append(&#x27;text&#x27;)
                                .attr(&#x27;x&#x27;, function (d) {
                                    return barWidth + (margin.left) - values(d[options.valueKey]);
                                })
                                .attr(&#x27;y&#x27;, labels.rangeBand())
                                .attr(&#x27;dy&#x27;, &#x27;.75em&#x27;)
                                .attr(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .text(function (d) {
                                    return d[options.valueKey];
                                });

                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;y axis&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + (margin.left) * 2 + &#x27;, &#x27; + labels.rangeBand() + &#x27;)&#x27;)
                                .call(labelAxis)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                .selectAll(&#x27;text&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .attr(&#x27;dx&#x27;, &#x27;-.8em&#x27;)
                                .attr(&#x27;dy&#x27;, &#x27;.15em&#x27;);
                            //Bug ......
                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;x axis&#x27;)
                                    .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + (margin.left) * 2 + &#x27;, &#x27; + barHeight + &#x27;)&#x27;)
                                    .call(valueAxis)
                                    .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                    .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                    .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                    .append(&#x27;text&#x27;)
                                    .attr(&#x27;y&#x27;, 5)
                                    .attr(&#x27;dy&#x27;, &#x27;.71em&#x27;)
                                    .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                    .text(options.valueKey);
                        };



                        /**
                         * 라인 차트 시각화
                         * @method lineChart
                         * @param {String} divId - 막대 차트 시각화할 DIV 아이디 이름
                         * @param {JSON Object} options - 옵션 JSON 객체 키 값&lt;br&gt;
                              {stroke : [&#x27;#4AAEEA&#x27;], width : 2,&lt;br&gt;
                               circleSize : 3, circleColor : [&#x27;#AAAAAA&#x27;]}&lt;br&gt;
                         */
                        OGDSM.chartVisualization.prototype.lineChart = function (rootDiv, subOptions) {
                            &#x27;use strict&#x27;;
                            subOptions = (typeof (subOptions) !== &#x27;undefined&#x27;) ? subOptions : {};
                            var data = this.data,
                                options = this.defaults,
                                chartOptions = {
                                    range : null,
                                    stroke : [&#x27;#4AAEEA&#x27;],
                                    width : 2,
                                    circleSize : 3,
                                    circleColor : [&#x27;#AAAAAA&#x27;]
                                };
                            chartOptions = OGDSM.applyOptions(chartOptions, subOptions);
                            var rootDivObj = $(&#x27;#&#x27; + rootDiv),
                                margin = {top : 20, right : 25, bottom : 130, left : 45},
                                barWidth = rootDivObj.width() - margin.left - margin.right,
                                barHeight = rootDivObj.height() - margin.top - margin.bottom;
                            $(&#x27;#&#x27; + rootDiv).empty();
                            var labels = d3.scale.ordinal().rangeRoundBands([0, barWidth], 0.1);
                            var values = d3.scale.linear().range([barHeight, 0]);
                            var chartSVG = d3.select(&#x27;#&#x27; + rootDiv).append(&#x27;svg&#x27;).attr(&#x27;id&#x27;, rootDiv + &#x27;Bar&#x27;)
                                .attr(&#x27;width&#x27;, barWidth + margin.left + margin.right)
                                .attr(&#x27;height&#x27;, barHeight + margin.top + margin.bottom);

                            var labelAxis = d3.svg.axis().scale(labels).orient(&#x27;bottom&#x27;);
                            var valueAxis = d3.svg.axis().scale(values).orient(&#x27;left&#x27;);
                            labels.domain(data.map(function (d) {
                                return d[options.labelKey];
                            }));
                            values.domain([options.min, options.max]);

                            var lineXY = d3.svg.line()
                                .x(function (d, i) {
                                    return labels(d[options.labelKey]);
                                })
                                .y(function (d, i) {
                                    return values(d[options.valueKey]);
                                });
                            //var bar = chartSVG.append(&#x27;path&#x27;).attr(&#x27;d&#x27;, lineFunc(

                            chartSVG.append(&#x27;path&#x27;).attr(&#x27;d&#x27;, lineXY(data))
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .attr(&#x27;stroke&#x27;, chartOptions.stroke)
                                .attr(&#x27;stroke-width&#x27;, options.stroke)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;);
                            var circleText = chartSVG.selectAll(&#x27;g&#x27;).data(data).enter()
                                .append(&#x27;g&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;);

                            circleText.append(&#x27;circle&#x27;)
                                .attr(&#x27;cy&#x27;, function (d, i) {
                                    return values(d[options.valueKey]);
                                })
                                .attr(&#x27;cx&#x27;, function (d, i) {
                                    return labels(d[options.labelKey]);
                                })
                                .attr(&#x27;r&#x27;, chartOptions.circleSize)
                                .attr(&#x27;fill&#x27;, chartOptions.circleColor);
                            circleText.append(&#x27;text&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .attr(&#x27;x&#x27;, function (d, i) {
                                    return labels(d[options.labelKey]) - 15;
                                })
                                .attr(&#x27;y&#x27;, function (d, i) {
                                    return values(d[options.valueKey]) - 20;
                                })
                                .attr(&#x27;dy&#x27;, &#x27;.75em&#x27;)
                                .attr(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .text(function (d) {
                                    return d[options.valueKey];
                                });
                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;x axis&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + (barHeight + margin.top) + &#x27;)&#x27;)
                                .call(labelAxis)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                .selectAll(&#x27;text&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .attr(&#x27;dx&#x27;, &#x27;-.8em&#x27;)
                                .attr(&#x27;dy&#x27;, &#x27;.15em&#x27;)
                                .attr(&#x27;transform&#x27;, function (d) {
                                    return &#x27;rotate(-65)&#x27;;
                                });
                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;y axis&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .call(valueAxis)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                .append(&#x27;text&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;rotate(-90)&#x27;)
                                .attr(&#x27;y&#x27;, 5)
                                .attr(&#x27;dy&#x27;, &#x27;.71em&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .text(options.valueKey);
                        };


                        /**
                         * 영역 차트 시각화
                         * @method areaChart
                         * @param {String} divId - 막대 차트 시각화할 DIV 아이디 이름
                         * @param {JSON Object} options - 옵션 JSON 객체 키 값&lt;br&gt;
                              {fill : [&#x27;#4AAEEA&#x27;], circleSize : 3, circleColor : [&#x27;#AAAAAA&#x27;]}&lt;br&gt;
                         */
                        OGDSM.chartVisualization.prototype.areaChart = function (rootDiv, subOptions) {
                            &#x27;use strict&#x27;;
                            subOptions = (typeof (subOptions) !== &#x27;undefined&#x27;) ? subOptions : {};
                            var data = this.data,
                                options = this.defaults,
                                chartOptions = {
                                    fill : [&#x27;#4AAEEA&#x27;],
                                    circleSize : 3,
                                    circleColor : [&#x27;#AAAAAA&#x27;]
                                };
                            chartOptions = OGDSM.applyOptions(chartOptions, subOptions);
                            var rootDivObj = $(&#x27;#&#x27; + rootDiv),
                                margin = {top : 20, right : 25, bottom : 130, left : 45},
                                barWidth = rootDivObj.width() - margin.left - margin.right,
                                barHeight = rootDivObj.height() - margin.top - margin.bottom;
                            $(&#x27;#&#x27; + rootDiv).empty();
                            var labels = d3.scale.ordinal().rangeRoundBands([0, barWidth], 0.1);
                            var values = d3.scale.linear().range([barHeight, 0]);
                            var chartSVG = d3.select(&#x27;#&#x27; + rootDiv).append(&#x27;svg&#x27;).attr(&#x27;id&#x27;, rootDiv + &#x27;Bar&#x27;)
                                .attr(&#x27;width&#x27;, barWidth + margin.left + margin.right)
                                .attr(&#x27;height&#x27;, barHeight + margin.top + margin.bottom);

                            var labelAxis = d3.svg.axis().scale(labels).orient(&#x27;bottom&#x27;);
                            var valueAxis = d3.svg.axis().scale(values).orient(&#x27;left&#x27;);
                            labels.domain(data.map(function (d) {
                                return d[options.labelKey];
                            }));
                            values.domain([options.min, options.max]);

                            var areaXY = d3.svg.area()
                                .x(function (d, i) {
                                    return labels(d[options.labelKey]);
                                })
                                .y0(barHeight)
                                .y1(function (d, i) {
                                    return values(d[options.valueKey]);
                                });
                            chartSVG.append(&#x27;path&#x27;).attr(&#x27;d&#x27;, areaXY(data))
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .attr(&#x27;class&#x27;, &#x27;area&#x27;)
                                .attr(&#x27;fill&#x27;, chartOptions.fill);


                            var circleText = chartSVG.selectAll(&#x27;g&#x27;).data(data).enter()
                                .append(&#x27;g&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;);

                            circleText.append(&#x27;circle&#x27;)
                                .attr(&#x27;cy&#x27;, function (d, i) {
                                    return values(d[options.valueKey]);
                                })
                                .attr(&#x27;cx&#x27;, function (d, i) {
                                    return labels(d[options.labelKey]);
                                })
                                .attr(&#x27;r&#x27;, chartOptions.circleSize)
                                .attr(&#x27;fill&#x27;, chartOptions.circleColor);
                            circleText.append(&#x27;text&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .attr(&#x27;x&#x27;, function (d, i) {
                                    return labels(d[options.labelKey]) - 15;
                                })
                                .attr(&#x27;y&#x27;, function (d, i) {
                                    return values(d[options.valueKey]) - 20;
                                })
                                .attr(&#x27;dy&#x27;, &#x27;.75em&#x27;)
                                .attr(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .text(function (d) {
                                    return d[options.valueKey];
                                });

                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;x axis&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + (barHeight + margin.top) + &#x27;)&#x27;)
                                .call(labelAxis)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                .selectAll(&#x27;text&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .attr(&#x27;dx&#x27;, &#x27;-.8em&#x27;)
                                .attr(&#x27;dy&#x27;, &#x27;.15em&#x27;)
                                .attr(&#x27;transform&#x27;, function (d) {
                                    return &#x27;rotate(-65)&#x27;;
                                });

                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;y axis&#x27;)
                                    .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                    .call(valueAxis)
                                    .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                    .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                    .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                    .append(&#x27;text&#x27;)
                                    .attr(&#x27;transform&#x27;, &#x27;rotate(-90)&#x27;)
                                    .attr(&#x27;y&#x27;, 5)
                                    .attr(&#x27;dy&#x27;, &#x27;.71em&#x27;)
                                    .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                    .text(options.valueKey);
                        };



                        /**
                         * 라인 차트 시각화
                         * @method lineChart
                         * @param {String} divId - 막대 차트 시각화할 DIV 아이디 이름
                         * @param {JSON Object} options - 옵션 JSON 객체 키 값&lt;br&gt;
                              {stroke : [&#x27;#4AAEEA&#x27;], width : 2,&lt;br&gt;
                               circleSize : 3, circleColor : [&#x27;#AAAAAA&#x27;]}&lt;br&gt;
                         */
                        OGDSM.chartVisualization.prototype.lineChart = function (rootDiv, subOptions) {
                            &#x27;use strict&#x27;;
                            subOptions = (typeof (subOptions) !== &#x27;undefined&#x27;) ? subOptions : {};
                            var data = this.data,
                                options = this.defaults,
                                chartOptions = {
                                    range : null,
                                    stroke : [&#x27;#4AAEEA&#x27;],
                                    width : 2,
                                    circleSize : 3,
                                    circleColor : [&#x27;#AAAAAA&#x27;]
                                };
                            chartOptions = OGDSM.applyOptions(chartOptions, subOptions);
                            var rootDivObj = $(&#x27;#&#x27; + rootDiv),
                                margin = {top : 20, right : 25, bottom : 130, left : 45},
                                barWidth = rootDivObj.width() - margin.left - margin.right,
                                barHeight = rootDivObj.height() - margin.top - margin.bottom;
                            $(&#x27;#&#x27; + rootDiv).empty();
                            var labels = d3.scale.ordinal().rangeRoundBands([0, barWidth], 0.1);
                            var values = d3.scale.linear().range([barHeight, 0]);
                            var chartSVG = d3.select(&#x27;#&#x27; + rootDiv).append(&#x27;svg&#x27;).attr(&#x27;id&#x27;, rootDiv + &#x27;Bar&#x27;)
                                .attr(&#x27;width&#x27;, barWidth + margin.left + margin.right)
                                .attr(&#x27;height&#x27;, barHeight + margin.top + margin.bottom);

                            var labelAxis = d3.svg.axis().scale(labels).orient(&#x27;bottom&#x27;);
                            var valueAxis = d3.svg.axis().scale(values).orient(&#x27;left&#x27;);
                            labels.domain(data.map(function (d) {
                                return d[options.labelKey];
                            }));
                            values.domain([options.min, options.max]);

                            var lineXY = d3.svg.line()
                                .x(function (d, i) {
                                    return labels(d[options.labelKey]);
                                })
                                .y(function (d, i) {
                                    return values(d[options.valueKey]);
                                });
                            //var bar = chartSVG.append(&#x27;path&#x27;).attr(&#x27;d&#x27;, lineFunc(

                            chartSVG.append(&#x27;path&#x27;).attr(&#x27;d&#x27;, lineXY(data))
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .attr(&#x27;stroke&#x27;, chartOptions.stroke)
                                .attr(&#x27;stroke-width&#x27;, options.stroke)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;);
                            var circleText = chartSVG.selectAll(&#x27;g&#x27;).data(data).enter()
                                .append(&#x27;g&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;);

                            circleText.append(&#x27;circle&#x27;)
                                .attr(&#x27;cy&#x27;, function (d, i) {
                                    return values(d[options.valueKey]);
                                })
                                .attr(&#x27;cx&#x27;, function (d, i) {
                                    return labels(d[options.labelKey]);
                                })
                                .attr(&#x27;r&#x27;, chartOptions.circleSize)
                                .attr(&#x27;fill&#x27;, chartOptions.circleColor);
                            circleText.append(&#x27;text&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .attr(&#x27;x&#x27;, function (d, i) {
                                    return labels(d[options.labelKey]) - 15;
                                })
                                .attr(&#x27;y&#x27;, function (d, i) {
                                    return values(d[options.valueKey]) - 20;
                                })
                                .attr(&#x27;dy&#x27;, &#x27;.75em&#x27;)
                                .attr(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .text(function (d) {
                                    return d[options.valueKey];
                                });
                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;x axis&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + (barHeight + margin.top) + &#x27;)&#x27;)
                                .call(labelAxis)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                .selectAll(&#x27;text&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .attr(&#x27;dx&#x27;, &#x27;-.8em&#x27;)
                                .attr(&#x27;dy&#x27;, &#x27;.15em&#x27;)
                                .attr(&#x27;transform&#x27;, function (d) {
                                    return &#x27;rotate(-65)&#x27;;
                                });
                            chartSVG.append(&#x27;g&#x27;).attr(&#x27;class&#x27;, &#x27;y axis&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + margin.left + &#x27;, &#x27; + margin.top + &#x27;)&#x27;)
                                .call(valueAxis)
                                .attr(&#x27;fill&#x27;, &#x27;none&#x27;)
                                .attr(&#x27;stroke&#x27;, &#x27;#000&#x27;)
                                .attr(&#x27;shape-rendering&#x27;, &#x27;crispEdges&#x27;)
                                .append(&#x27;text&#x27;)
                                .attr(&#x27;transform&#x27;, &#x27;rotate(-90)&#x27;)
                                .attr(&#x27;y&#x27;, 5)
                                .attr(&#x27;dy&#x27;, &#x27;.71em&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;end&#x27;)
                                .text(options.valueKey);
                        };


                        OGDSM.chartVisualization.prototype.kMap = function (divId, serverAddr, geodata, center_lat, center_lon, map_scale) {
                            &#x27;use strict&#x27;;
                            var rootDiv = $(&#x27;#&#x27; + divId),
                                paramData = {};
                            paramData.jsonName = geodata;
                            rootDiv.empty();
                            $.ajax({
                                type : &#x27;POST&#x27;,
                                url : serverAddr,
                                data : JSON.stringify(paramData),
                                contentType : &quot;application/json;charset=UTF-8&quot;,
                                dataType : &#x27;json&#x27;,
                                success : function (msg) {
                                    var topology = JSON.parse(msg.data);

                                    var svg = d3.select(&#x27;#&#x27; + divId)
                                                .append(&#x27;svg&#x27;)
                                                .attr(&quot;width&quot;, 500)
                                                .attr(&quot;height&quot;, 600);
                                    var projection = d3.geo.mercator()
                                                        .center([center_lon, center_lat])
                                                        .scale(map_scale);
                                    var path = d3.geo.path()
                                                    .projection(projection);
                                    var g = svg.append(&quot;g&quot;);

                                    if (geodata === &quot;SIDO&quot;) {
                                        g.selectAll(&quot;path&quot;)
                                            .data(topojson.feature(topology, topology.objects.All_TL_SCCO_CTPRVN_4326).features)
                                            .enter().append(&quot;path&quot;)
                                            .attr(&quot;class&quot;, function (d) { return &quot;sido_&quot; + d.properties.CTP_ENG_NM; })
                                            .style(&quot;fill&quot;, function (d) { return &quot;#&quot; + Math.random().toString(16).slice(2, 8); })
                                            .attr(&quot;d&quot;, path);
                                    } else if (geodata === &quot;GU&quot;) {
                                        g.selectAll(&quot;path&quot;)
                                            .data(topojson.feature(topology, topology.objects.All_TL_SCCO_SIG_4326).features)
                                            .enter().append(&quot;path&quot;)
                                            .attr(&quot;class&quot;, function (d) { return &quot;gu_&quot; + d.properties.SIG_ENG_NM; })
                                            .style(&quot;fill&quot;, function (d) { return &quot;#&quot; + Math.random().toString(16).slice(2, 8); })
                                            .attr(&quot;d&quot;, path);
                                    } else if (geodata === &quot;DONG&quot;) {
                                        g.selectAll(&quot;path&quot;)
                                            .data(topojson.feature(topology, topology.objects.All_TL_SCCO_EMD_4326).features)
                                            .enter().append(&quot;path&quot;)
                                            .attr(&quot;class&quot;, function (d) { return &quot;dong_&quot; + d.properties.EMD_ENG_NM; })
                                            .style(&quot;fill&quot;, function (d) { return &quot;#&quot; + Math.random().toString(16).slice(2, 8); })
                                            .attr(&quot;d&quot;, path);
                                    }
                                },
                                error : function (e) {
                                    console.log(e);
                                    $(&#x27;#result&#x27;).text(e);
                                }
                            });
                        };

                        /**
                         * 파이 차트 시각화
                         * @method areaChart
                         * @param {String} divId - 막대 차트 시각화할 DIV 아이디 이름
                         * @param {JSON Object} options - 옵션 JSON 객체 키 값&lt;br&gt;
                              {fill : [&#x27;#4AAEEA&#x27;], circleSize : 3, circleColor : [&#x27;#AAAAAA&#x27;]}&lt;br&gt;
                         */
                        /*
                        OGDSM.chartVisualization.prototype.pieChart = function (rootDiv, subOptions) {
                            &#x27;use strict&#x27;;
                            subOptions = (typeof (subOptions) !== &#x27;undefined&#x27;) ? subOptions : {};
                            var data = this.data,
                                options = this.defaults,
                                chartOptions = {
                                    fill : [&#x27;#4AAEEA&#x27;],
                                    circleSize : 3,
                                    circleColor : [&#x27;#AAAAAA&#x27;]
                                };
                            chartOptions = OGDSM.applyOptions(chartOptions, subOptions);
                            var rootDivObj = $(&#x27;#&#x27; + rootDiv),
                                margin = {top : 0, right : 0, bottom : 0, left : 0},
                                barWidth = rootDivObj.width() - margin.left - margin.right,
                                barHeight = rootDivObj.height() - margin.top - margin.bottom;
                            $(&#x27;#&#x27; + rootDiv).empty();
                            var chartSVG = d3.select(&#x27;#&#x27; + rootDiv).append(&#x27;svg&#x27;).attr(&#x27;id&#x27;, rootDiv + &#x27;Bar&#x27;)
                                .attr(&#x27;width&#x27;, barWidth + margin.left + margin.right)
                                .attr(&#x27;height&#x27;, barHeight + margin.top + margin.bottom)
                                .attr(&#x27;transform&#x27;, &#x27;translate(&#x27; + barWidth / 2 + &#x27;,&#x27; + barHeight / 2 + &#x27;)&#x27;);

                            var radius = Math.min(barWidth, barHeight) / 2;
                            var arc = d3.svg.arc()
                                .outerRadius(radius - 10)
                                .innerRadius(0);

                            var pie = d3.layout.pie()
                                .sort(null)
                                .value(function (d) {
                                    return d[options.valueKey];
                                });

                            var group = chartSVG.selectAll(&#x27;.arc&#x27;)
                                .data(pie(data))
                                .enter()
                                .append(&#x27;g&#x27;)
                                .attr(&#x27;class&#x27;, &#x27;arc&#x27;);

                            group.append(&#x27;path&#x27;)
                                .attr(&#x27;d&#x27;, arc)
                                .style(&#x27;fill&#x27;, function (d) {
                                    return &#x27;#AAAAAA&#x27;;
                                });
                            group.append(&#x27;text&#x27;)
                                .attr(&#x27;transform&#x27;, function (d) {
                                    return &#x27;translate(&#x27; + arc.centroid(d) + &#x27;)&#x27;;
                                })
                                .attr(&#x27;dy&#x27;, &#x27;.35em&#x27;)
                                .style(&#x27;text-anchor&#x27;, &#x27;middle&#x27;)
                                .text(function (d) {
                                    return d[options.labelKey];
                                });
                        };
                        */

                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
