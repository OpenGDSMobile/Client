<!DOCTYPE html>
<html lang="en" class="yui-overrride">
<head>
    <meta charset="utf-8">
    <title>js/openGDSMobile/openGDSMD3.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1 class="blue-main-title"></h1>
        </div>
        <div class="yui3-u-1-4 version project-version">
            API Docs for:
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>

                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>

                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/OGDSM.html">OGDSM</a></li>
                                <li><a href="../classes/OGDSM.eGovFramUI.html">OGDSM.eGovFramUI</a></li>
                                <li><a href="../classes/OGDSM.externalConnection.html">OGDSM.externalConnection</a></li>
                                <li><a href="../classes/OGDSM.olMap.html">OGDSM.olMap</a></li>
                                <li><a href="../classes/OGDSM.visualization.html">OGDSM.visualization</a></li>
                            </ul>

                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/OGDSM.namespace.html">OGDSM.namespace</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>

                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>

                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>

                </div>

            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js/openGDSMobile/openGDSMD3.js</h1>

                        <div class="file">
                            <pre class="code prettyprint linenums">
                        openGDSM.d3 = {};


                        /**
                         * Create Bar Chart
                         * parameter : div id, xyAxis(2 dim Array), color (1 dim Array), range(1 dim Array)
                         */
                        openGDSM.d3.barchart = function(divId, xyData, color, range){
                        	var barHeight = 18;
                        	var minusWidth=0;
                        	$(&#x27;#&#x27;+divId).empty();
                        	var div = d3.select(&#x27;#&#x27;+divId).append(&quot;svg&quot;)
                        				.attr(&quot;id&quot;,&quot;barChart&quot;)
                        				.attr(&quot;width&quot;,$(&#x27;#&#x27;+divId).width())
                        				.attr(&quot;height&quot;,barHeight*xyData[0].length);
                        //	console.log(div);	console.log(xyData[0]);	console.log(color);	console.log(range);
                        	var maxData = d3.max(xyData[0]);
                        	var x = d3.scale.linear()
                        			.domain([0, maxData])
                        			.range([0,$(&#x27;#&#x27;+divId).width()-50]);
                        	div.selectAll(&#x27;rect&#x27;)
                        				.data(xyData[0])
                        				.enter()
                        					.append(&#x27;rect&#x27;)
                        					.attr(&#x27;x&#x27;,0)
                        					.attr(&#x27;y&#x27;,function(d,i){
                        						return i*barHeight;
                        					})
                        					.attr(&#x27;width&#x27;,function(d){
                        						if(d==&#x27;-&#x27; || d==&#x27;0&#x27;) return x(20);
                        						return x(d)-minusWidth;
                        					})
                        					.attr(&#x27;height&#x27;,barHeight-2)
                        					.attr(&#x27;fill&#x27;,function(d,i){
                        						if(d==&#x27;-&#x27; || d==&#x27;0&#x27;) return &#x27;#AAAAAA&#x27;;
                        						for(var z=0; z&lt;range.length; z++)
                        							if(xyData[0][i] &lt;=range[z]){
                        								return color[z];
                        							}
                        						return color[color.length];
                        					});
                        	div.selectAll(&#x27;g&#x27;)
                        				.data(xyData[1])
                        				.enter()
                        				.append(&#x27;text&#x27;)
                        					.attr(&#x27;x&#x27;,0)
                        					.attr(&#x27;y&#x27;,function(d,i){
                        						return i*barHeight+barHeight-5;
                        					})
                        					//.attr(&#x27;dy&#x27;,&#x27;.15em&#x27;)
                        					.attr(&#x27;font-weight&#x27;,&#x27;bold&#x27;)
                        					.attr(&#x27;font-size&#x27;,&#x27;0.8em&#x27;)
                        					.text(function(d){
                        						return d;
                        					});
                        	div.selectAll(&#x27;g&#x27;)
                        					.data(xyData[0])
                        					.enter()
                        					.append(&#x27;text&#x27;)
                        						.attr(&#x27;x&#x27;,function(d){
                        							if(d==&#x27;-&#x27;||d==&#x27;0&#x27;) return x(10);
                        							return x(d)-minusWidth;
                        						})
                        						.attr(&#x27;y&#x27;,function(d,i){
                        							return i*barHeight+barHeight-5;
                        						})
                        						.attr(&#x27;dy&#x27;,&#x27;.15em&#x27;)
                        						.attr(&#x27;fill&#x27;,&#x27;black&#x27;)
                        						.attr(&#x27;font-size&#x27;,&#x27;0.8em&#x27;)
                        						.attr(&#x27;font-weight&#x27;,&#x27;bold&#x27;)
                        						.text(function(d){
                        							if(d==&#x27;-&#x27; || d==&#x27;0&#x27;) return &#x27;점검중&#x27;;
                        							return d;
                        						});
                        };





                        /**
                        *
                        *
                        */
                        openGDSM.d3.vectorMap ={
                        	readVector : function(features){

                        		var canvasFunction = function(extent,resolution,pixelRatio,size, projection){
                        			var canvasWidth = size[0];
                        			var canvasHeight = size[1];

                        			var canvas = d3.select(document.createElement(&#x27;canvas&#x27;));
                        			canvas.attr(&#x27;width&#x27;,canvasWidth).attr(&#x27;height&#x27;,canvasHeight);

                        			var context = canvas.node().getContext(&#x27;2d&#x27;);

                        			var d3Projection = d3.geo.mercator().scale(1).translate([0,0]);
                        			var d3Path = d3.geo.path().projection(d3Projection);

                        			var pixelBounds = d3Path.bounds(features);
                        			var pixelBoundsWidth = pixelBounds[1][0] - pixelBounds[0][0];
                        			var pixelBoundsHeight = pixelBounds[1][1] - pixelBounds[0][1];

                        			var geoBounds = d3.geo.bounds(features);
                        			var geoBoundsLeftBottom = ol.proj.transform(geoBounds[0], &#x27;EPSG:4326&#x27;,projection);
                        		    var geoBoundsRightTop = ol.proj.transform(geoBounds[1], &#x27;EPSG:4326&#x27;, projection);
                        		    var geoBoundsWidth = geoBoundsRightTop[0] - geoBoundsLeftBottom[0];
                        		    if (geoBoundsWidth &lt; 0) {
                        		        geoBoundsWidth += ol.extent.getWidth(projection.getExtent());
                        		    }
                        		    var geoBoundsHeight = geoBoundsRightTop[1] - geoBoundsLeftBottom[1];

                        		    var widthResolution = geoBoundsWidth / pixelBoundsWidth;
                        		    var heightResolution = geoBoundsHeight / pixelBoundsHeight;
                        		    var r = Math.max(widthResolution, heightResolution);
                        		    var scale = r / (resolution / pixelRatio);

                        		    var center = ol.proj.transform(ol.extent.getCenter(extent), projection, &#x27;EPSG:4326&#x27;);


                        		    d3Projection.scale(scale).center(center).translate([canvasWidth / 2, canvasHeight / 2]);
                        		    d3Path = d3Path.projection(d3Projection).context(context);
                        		    d3Path(features);
                        		    context.stroke();

                        		    return canvas[0][0];
                        		};
                        	}


                        };

                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
